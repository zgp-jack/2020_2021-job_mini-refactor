{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[54],{\"145\":function(t,e,a){\"use strict\";a.r(e);var n=a(55),o=a.n(n);for(var r in n)\"default\"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e.default=o.a},\"244\":function(t,e,a){t.exports=a.p+\"pages/integral/tabber/index.wxml\"},\"421\":function(t,e,a){\"use strict\";a.r(e);a(422);var n=a(145);for(var o in n)\"default\"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o)},\"422\":function(t,e,a){\"use strict\";a(244)},\"423\":function(t,e,a){},\"55\":function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{\"value\":!0});var Te=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var a=[],n=!0,o=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!e||a.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return a}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},n=function(t,e,a){return e&&defineProperties(t.prototype,e),a&&defineProperties(t,a),t};function defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o,r,ke=a(0),Ce=_interopRequireDefault(ke),Fe=a(1),xe=a(9),Ae=a(2),$e=a(6),we=_interopRequireDefault(a(3));function _interopRequireDefault(t){return t&&t.__esModule?t:{\"default\":t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}a(423);var i=(function _inherits(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{\"constructor\":{\"value\":t,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Tabber,Ce.default.Component),n(Tabber,[{\"key\":\"_constructor\",\"value\":function _constructor(t){(function get(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:get(o,e,a)}if(\"value\"in n)return n.value;var r=n.get;return void 0!==r?r.call(a):void 0})(Tabber.prototype.__proto__||Object.getPrototypeOf(Tabber.prototype),\"_constructor\",this).call(this,t),this.$$refs=new Ce.default.RefsArray}},{\"key\":\"_createData\",\"value\":function _createData(t,e,a){var o=this;this.__state=t||this.state||{},this.__props=e||this.props||{};var n=this.$prefix,r=(0,ke.genCompid)(n+\"$compid__121\"),i=Te(r,2),s=i[0],u=i[1],l=(0,ke.genCompid)(n+\"$compid__122\"),c=Te(l,2),f=c[0],p=c[1],y=(0,ke.useRouter)().params,m=y.info,d=y.office,g=(0,ke.useState)(!1),_=Te(g,2),v=_[0],b=_[1],h=(0,ke.useState)(!1),S=Te(h,2),T=S[0],k=S[1],C=(0,ke.useState)(m),F=Te(C,2),x=F[0],A=F[1],$=(0,ke.useState)([]),w=Te($,2),I=w[0],M=w[1],O=(0,ke.useState)(\"\"),R=Te(O,2),j=R[0],P=R[1],D=(0,ke.useState)(\"\"),L=Te(D,2),E=L[0],N=L[1],B=(0,ke.useState)(\"\"),U=Te(B,2),q=U[0],G=U[1],J=(0,ke.useState)(\"\"),z=Te(J,2),V=z[0],K=z[1],Y=(0,ke.useState)(\"\"),H=Te(Y,2),Q=H[0],W=H[1],X=(0,ke.useState)(\"0\"),Z=Te(X,2),tt=Z[0],et=Z[1],at=(0,ke.useState)(\"0\"),nt=Te(at,2),ot=nt[0],rt=nt[1],it=(0,ke.useState)({\"lists\":[],\"next_page\":0,\"stime\":\"0\",\"bak\":\"0\"}),st=Te(it,2),ut=st[0],lt=st[1],ct=(0,ke.useState)({\"get\":0,\"expend\":0}),ft=Te(ct,2),pt=ft[0],yt=ft[1],mt=(0,ke.useState)(!1),dt=Te(mt,2),gt=dt[0],_t=dt[1],vt=(0,ke.useState)(),bt=Te(vt,2),ht=bt[0],St=bt[1],Tt=(0,ke.useState)(!1),kt=Te(Tt,2),Ct=kt[0],Ft=kt[1],xt=(0,ke.useState)(\"\"),At=Te(xt,2),$t=At[0],wt=At[1],It=(0,ke.useState)(\"\"),Mt=Te(It,2),Ot=Mt[0],Rt=Mt[1],jt=(0,ke.useState)({\"y\":\"0\",\"m\":\"0\",\"stime\":\"0\",\"type\":0,\"bak\":\"0\",\"system_type\":(0,xe.getSystemInfo)(),\"flag\":!1}),Pt=Te(jt,2),Dt=Pt[0],Lt=Pt[1],Et=(0,ke.useState)(!1),Nt=Te(Et,2),Bt=Nt[0],Ut=Nt[1],qt=(0,ke.useState)({\"time\":\"\",\"sortType\":\"0\",\"flag\":!1,\"listType\":\"0\"}),Gt=Te(qt,2),Jt=Gt[0],zt=Gt[1],Vt=(0,ke.useState)({\"time\":\"\",\"sortType\":\"0\",\"flag\":!1,\"listType\":\"0\"}),Kt=Te(Vt,2),Yt=Kt[0],Ht=Kt[1],Qt=(0,ke.useState)(0),Wt=Te(Qt,2),Xt=Wt[0],Zt=Wt[1],te=(0,ke.useState)([]),ee=Te(te,2),ae=ee[0],ne=ee[1],oe=(0,ke.useState)([]),re=Te(oe,2),ie=re[0],se=re[1],ue=(0,ke.useState)(!1),le=Te(ue,2),ce=le[0],fe=le[1],pe=(0,ke.useState)(!1),ye=Te(pe,2),me=ye[0],de=ye[1];(0,ke.useEffect)(function(){var t=\"0\"===x?\"鱼泡网-积分来源记录\":\"鱼泡网-积分消耗记录\";Ce.default.setNavigationBarTitle({\"title\":t});var e=new Date,a=e.getFullYear(),n=e.getMonth()+1;if(1<=n&&n<=9&&(n=\"0\"+n),G(a+\"-\"+n),\"0\"===x)if(ce){if(Jt.flag){var o=Jt.time.split(\"-\"),r={\"y\":o[0],\"m\":o[1],\"stime\":\"0\",\"source_type\":Jt.sortType,\"bak\":\"0\",\"system_type\":(0,xe.getSystemInfo)(),\"flag\":!0,\"office\":d};P(ae[Jt.listType]),W(o[0]+\"年\"+o[1]+\"月\"),K(Jt.time),Zt(parseInt(Jt.listType)),Lt(r)}}else _e();else if(me){var i=Yt.time.split(\"-\"),s={\"y\":i[0],\"m\":i[1],\"stime\":\"0\",\"type\":Yt.sortType,\"bak\":\"0\",\"system_type\":(0,xe.getSystemInfo)(),\"flag\":!0};P(ie[Yt.listType]),W(i[0]+\"年\"+i[1]+\"月\"),K(Yt.time),Zt(parseInt(Yt.listType)),Lt(s)}else ge()},[x]),(0,ke.useEffect)(function(){Dt.flag&&(\"0\"===x?ve:be)()},[Dt]);var ge=function integralExpendConfig(){(0,Fe.integralExpendConfigAction)().then(function(t){N(t.data.min.y+\"-\"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});M(t.data.types),se(e),de(!0),P(\"消耗分类\");var a=t.data.default.y+\"-\"+t.data.default.m;K(a),W(t.data.default.y+\"年\"+t.data.default.m+\"月\");var n={\"y\":t.data.default.y,\"m\":t.data.default.m,\"stime\":\"0\",\"type\":0,\"bak\":\"0\",\"system_type\":(0,xe.getSystemInfo)(),\"flag\":!0};Lt(n)})},_e=function integralSourceConfig(){var t={\"office\":d,\"system_type\":(0,xe.getSystemInfo)()};(0,Fe.integralSourceConfigAction)(t).then(function(t){N(t.data.min.y+\"-\"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});M(t.data.types),ne(e),fe(!0),P(\"来源分类\");var a=t.data.default.y+\"-\"+t.data.default.m;K(a),W(t.data.default.y+\"年\"+t.data.default.m+\"月\");var n={\"y\":t.data.default.y,\"m\":t.data.default.m,\"stime\":\"0\",\"source_type\":0,\"bak\":\"0\",\"system_type\":(0,xe.getSystemInfo)(),\"flag\":!0,\"office\":d};Lt(n)})},ve=function integralSourceLists(){(0,Fe.integralSourceListsAction)(Dt).then(function(t){Bt||(T||(yt(t.data.sum_data),k(!0)),v?(lt({\"lists\":[].concat(_toConsumableArray(t.data.lists)),\"next_page\":t.data.next_page,\"stime\":t.data.stime,\"bak\":t.data.bak}),b(!1)):lt({\"lists\":[].concat(_toConsumableArray(ut.lists),_toConsumableArray(t.data.lists)),\"next_page\":t.data.next_page,\"stime\":t.data.stime,\"bak\":t.data.bak}))})},be=function integralExpendLists(){(0,Fe.integralExpendListsAction)(Dt).then(function(t){Bt||(T||(yt(t.data.sum_data),k(!0)),v?(lt({\"lists\":[].concat(_toConsumableArray(t.data.lists)),\"next_page\":t.data.next_page,\"stime\":t.data.stime,\"bak\":t.data.bak}),b(!1)):lt({\"lists\":[].concat(_toConsumableArray(ut.lists),_toConsumableArray(t.data.lists)),\"next_page\":t.data.next_page,\"stime\":t.data.stime,\"bak\":t.data.bak}))})};(0,ke.useReachBottom)(function(){if(0!==ut.next_page){var t=V.split(\"-\"),e=void 0;if(\"0\"===x)for(var a=0;a<I.length;a++)I[a].name===ae[tt]&&(e=I[a].type);else for(var n=0;n<I.length;n++)I[n].name===ie[ot]&&(e=I[n].type);var o={\"y\":t[0],\"m\":t[1],\"stime\":ut.stime,\"source_type\":e,\"type\":e,\"bak\":\"0\",\"system_type\":\"\",\"flag\":!0};Lt(o)}else Ut(!0)}),this.anonymousFunc0=function(t){return function handleClckTime(t){b(!0),k(!1);var e=t.target.value.split(\"-\");W(e[0]+\"年\"+e[1]+\"月\"),K(t.target.value);var a=void 0;if(\"0\"===x)for(var n=0;n<I.length;n++)I[n].name===ae[tt]&&(a=I[n].type);else for(var o=0;o<I.length;o++)I[o].name===ie[ot]&&(a=I[o].type);var r={\"y\":e[0],\"m\":e[1],\"stime\":\"0\",\"source_type\":a,\"type\":a,\"bak\":\"0\",\"system_type\":(0,xe.getSystemInfo)(),\"flag\":!0};Lt(r)}(t)},this.anonymousFunc1=function(t){return function handleClick(t){b(!0),k(!1);var e=void 0;if(\"0\"===x){et(t.detail.value),P(ae[t.detail.value]);for(var a=0;a<I.length;a++)I[a].name===ae[t.detail.value]&&(e=I[a].type)}else{P(ie[t.detail.value]),rt(t.detail.value);for(var n=0;n<I.length;n++)I[n].name===ie[t.detail.value]&&(e=I[n].type)}var o=V.split(\"-\"),r={\"y\":o[0],\"m\":o[1],\"stime\":\"0\",\"type\":e,\"source_type\":e,\"bak\":\"0\",\"system_type\":(0,xe.getSystemInfo)(),\"flag\":!0};Lt(r)}(t)},this.anonymousFunc2=function handleJump(){k(!1),Ut(!1),b(!0);var t=void 0;if(\"0\"===x)for(var e=0;e<I.length;e++)I[e].name===ae[tt]&&(t=I[e].type);else for(var a=0;a<I.length;a++)I[a].name===ie[ot]&&(t=I[a].type);\"0\"===x?(A(\"1\"),zt({\"time\":V,\"sortType\":t,\"flag\":!0,\"listType\":tt})):\"1\"===x&&(A(\"0\"),Ht({\"time\":V,\"sortType\":t,\"flag\":!0,\"listType\":ot}))},this.anonymousFunc4=function(){_t(!1)},this.anonymousFunc5=function(){Ce.default.makePhoneCall({\"phoneNumber\":ht.user_mobile})},this.anonymousFunc6=function(){return function handleComplaint(t){Ft(!0),wt(t)}(ht.id)};var he=ut.lists.map(function(t,e){t={\"$original\":(0,ke.internal_get_original)(t)};var a=e+e,n=\"bedzz\"+e;return o.anonymousFunc3Map[n]=function(){return function handleModal(t){(0,Fe.integralUseInfoAction)(t).then(function(t){\"deleted\"===t.errcode?Ce.default.showModal({\"title\":\"温馨提示\",\"content\":t.errmsg,\"showCancel\":!1}):(St(t.info),_t(!0))})}(t.$original.id)},{\"$loopState__temp2\":a,\"_$indexKey\":n,\"$original\":t.$original}}),Se=\"1\"===x&&gt&&ht?ht.classifyName.map(function(t,e){return t={\"$original\":(0,ke.internal_get_original)(t)},{\"$loopState__temp4\":\"1\"===x&&gt&&ht?e+e:null,\"$original\":t.$original}}):[];return ut.lists.length||ke.propsManager.set({\"text\":\"0\"===x?\"暂无积分来源记录\":\"暂无积分消耗记录\"},u,s),Ct&&ke.propsManager.set({\"display\":Ct,\"textarea\":Ot,\"handleTextarea\":function handleTextarea(t){var e=t.detail.value;Rt(e)},\"setComplaintModal\":Ft,\"handleSubmit\":function handleSubmit(){if(!(0,$e.isVaildVal)(Ot,15,500))return(0,we.default)(\"输入内容不少于15个字且必须包含文字\"),!1;var t={\"content\":Ot,\"type\":\"job\",\"infoId\":$t};(0,Fe.publishComplainAction)(t).then(function(){(0,we.default)(\"提交成功\"),Ft(!1),_t(!1)})}},p,f),Object.assign(this.__state,{\"data\":ut,\"modalData\":ht,\"loopArray137\":he,\"loopArray138\":Se,\"$compid__121\":u,\"$compid__122\":p,\"time\":V,\"start\":E,\"end\":q,\"IMGCDNURL\":Ae.IMGCDNURL,\"initInfo\":x,\"sourceList\":ae,\"consumeList\":ie,\"startType\":Xt,\"modal\":gt,\"complaintModal\":Ct,\"showTime\":Q,\"title\":j,\"num\":pt}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(){}},{\"key\":\"anonymousFunc2\",\"value\":function anonymousFunc2(){}},{\"key\":\"anonymousFunc3\",\"value\":function anonymousFunc3(t){for(var e,a=arguments.length,n=Array(1<a?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return this.anonymousFunc3Map[t]&&(e=this.anonymousFunc3Map)[t].apply(e,n)}},{\"key\":\"anonymousFunc4\",\"value\":function anonymousFunc4(){}},{\"key\":\"anonymousFunc5\",\"value\":function anonymousFunc5(){}},{\"key\":\"anonymousFunc6\",\"value\":function anonymousFunc6(){}}]),r=o=Tabber,o.$$events=[\"anonymousFunc0\",\"anonymousFunc1\",\"anonymousFunc2\",\"anonymousFunc3\",\"anonymousFunc4\",\"anonymousFunc5\",\"anonymousFunc6\"],o.$$componentPath=\"pages/integral/tabber/index\",r);function Tabber(){var t,e,a;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,Tabber);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=a=_possibleConstructorReturn(this,(t=Tabber.__proto__||Object.getPrototypeOf(Tabber)).call.apply(t,[this].concat(o)))).config={\"navigationBarTitleText\":\"\"},a.$usedState=[\"data\",\"modalData\",\"loopArray137\",\"loopArray138\",\"$compid__121\",\"$compid__122\",\"time\",\"start\",\"end\",\"IMGCDNURL\",\"initInfo\",\"sourceList\",\"consumeList\",\"startType\",\"modal\",\"complaintModal\",\"showTime\",\"title\",\"num\"],a.anonymousFunc3Map={},a.customComponents=[\"Nodata\",\"Report\"],_possibleConstructorReturn(a,e)}i.config={\"navigationBarTitleText\":\"\"},e.default=i,Component(a(0).default.createComponent(i,!0))}},[[421,0,1,2,3]]]);","extractedComments":[]}