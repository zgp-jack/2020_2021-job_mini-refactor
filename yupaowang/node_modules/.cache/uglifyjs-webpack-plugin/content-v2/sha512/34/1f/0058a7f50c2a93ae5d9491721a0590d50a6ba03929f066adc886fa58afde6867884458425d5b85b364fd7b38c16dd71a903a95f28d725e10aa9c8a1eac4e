{"code":"(swan.webpackJsonp=swan.webpackJsonp||[]).push([[61],{\"97\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},r=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=n(0),P=_interopRequireDefault(w),S=n(2),j=n(1),M=n(3),E=n(4),x=_interopRequireDefault(n(5)),F=n(16),k=n(9);function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}n(98);var o=(function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Recharge,P.default.Component),r(Recharge,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if(\"value\"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0})(Recharge.prototype.__proto__||Object.getPrototypeOf(Recharge.prototype),\"_constructor\",this).call(this,e),this.$$refs=new P.default.RefsArray}},{\"key\":\"_createData\",\"value\":function _createData(e,t,n){var r=this;this.__state=e||this.state||{},this.__props=t||this.props||{},this.$prefix,(0,E.useDispatch)();var o=(0,w.useState)([]),a=R(o,2),i=a[0],u=a[1],c=(0,w.useState)(0),s=R(c,2),l=s[0],f=s[1],p=(0,w.useState)(0),h=R(p,2),y=h[0],g=h[1],d=(0,w.useState)(0),v=R(d,2),_=v[0],b=v[1];(0,w.useEffect)(function(){(0,j.getRechargeList)().then(function(e){if(\"ok\"==e.errcode){u(e.list),f(parseInt(e.user.integral));var t=e.list.findIndex(function(e){return\"1\"==e.default});g(t);var n=(0,k.getPointNumber)(e.list[t].price,e.list[t].integral);b(n)}else(0,M.ShowActionModal)({\"msg\":e.errmsg,\"success\":function success(){P.default.navigateBack()}})})},[]),this.anonymousFunc1=function(){return function userRechargeAction(){var n=i[y].integral;P.default.login({\"success\":function success(e){(0,j.getRechargeOpenid)(e.code).then(function(e){var t={\"priceType\":i[y].id,\"openid\":e.openid};(0,j.getRechargeOrder)(t).then(function(e){P.default.requestPayment(O({},e.payData)).then(function(){f(l+n),P.default.showModal({\"title\":\"恭喜您\",\"content\":\"您已成功充值\"+n+\"个积分\",\"cancelText\":\"会员中心\",\"confirmText\":\"继续充值\",\"success\":function success(e){e.cancel&&P.default.reLaunch({\"url\":\"/pages/index/index?type=\"+F.MEMBER})}})}).catch(function(){(0,M.errMsg)(\"用户取消充值\")})}).catch(function(){(0,M.errMsg)(\"网络异常，充值失败，客服电话\"+S.SERVERPHONE)})}).catch(function(){(0,M.ShowActionModal)(\"充值失败，请联系客服电话\"+S.SERVERPHONE)})}})}()};var m=i.map(function(e,t){e={\"privateOriginal\":(0,w.internal_get_original)(e)};var n=\"dazzz\"+t;return r.anonymousFunc0Map[n]=function(){return function userChooseItem(n){g(n);var e=(0,k.getPointNumber)(i[n].price,i[n].integral);b(e);var t=JSON.parse(JSON.stringify(i));t.map(function(e,t){e.default=t==n?\"1\":\"0\"}),u(t)}(t)},{\"_$indexKey\":n,\"loopState__temp2\":(0,x.default)({\"recharge-list-box\":!0,\"recharge-list-box-active\":t===y}),\"privateOriginal\":e.privateOriginal}});return Object.assign(this.__state,{\"loopArray33\":m,\"lists\":i,\"integral\":l,\"current\":y,\"price\":_}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.anonymousFunc0Map[e]&&(t=this.anonymousFunc0Map)[e].apply(t,r)}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(){}}]),Recharge);function Recharge(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Recharge);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Recharge.__proto__||Object.getPrototypeOf(Recharge)).apply(this,arguments));return e.$usedState=[\"loopArray33\",\"lists\",\"integral\",\"current\",\"price\"],e.anonymousFunc0Map={},e.customComponents=[\"AtMessage\"],e}o.$$events=[\"anonymousFunc0\",\"anonymousFunc1\"],o.$$componentPath=\"pages/recharge/index\",t.default=o,Page(n(0).default.createComponent(o,!0))},\"98\":function(e,t,n){}},[[97,0,1]]]);","extractedComments":[]}