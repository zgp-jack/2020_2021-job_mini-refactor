{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[61],{\"131\":function(e,t,n){\"use strict\";n.r(t);var r=n(43),o=n.n(r);for(var a in r)\"default\"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=o.a},\"226\":function(e,t,n){e.exports=n.p+\"pages/recharge/index.wxml\"},\"368\":function(e,t,n){\"use strict\";n.r(t);n(369);var r=n(131);for(var o in r)\"default\"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o)},\"369\":function(e,t,n){\"use strict\";n(226)},\"370\":function(e,t,n){},\"43\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},r=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,a,w=n(0),P=_interopRequireDefault(w),x=n(2),S=n(1),j=n(3),M=n(6),E=_interopRequireDefault(n(4)),$=n(15),F=n(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}n(370);var i=(function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Recharge,P.default.Component),r(Recharge,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if(\"value\"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0})(Recharge.prototype.__proto__||Object.getPrototypeOf(Recharge.prototype),\"_constructor\",this).call(this,e),this.$$refs=new P.default.RefsArray}},{\"key\":\"_createData\",\"value\":function _createData(e,t,n){var r=this;this.__state=e||this.state||{},this.__props=t||this.props||{},this.$prefix,(0,M.useDispatch)();var o=(0,w.useState)([]),a=R(o,2),i=a[0],u=a[1],c=(0,w.useState)(0),s=R(c,2),l=s[0],f=s[1],p=(0,w.useState)(0),h=R(p,2),g=h[0],y=h[1],d=(0,w.useState)(0),v=R(d,2),_=v[0],b=v[1];(0,w.useEffect)(function(){(0,S.getRechargeList)().then(function(e){if(\"ok\"==e.errcode){u(e.list),f(parseInt(e.user.integral));var t=e.list.findIndex(function(e){return\"1\"==e.default});y(t);var n=(0,F.getPointNumber)(e.list[t].price,e.list[t].integral);b(n)}else(0,j.ShowActionModal)({\"msg\":e.errmsg,\"success\":function success(){P.default.navigateBack()}})})},[]),this.anonymousFunc1=function(){return function userRechargeAction(){var n=i[g].integral;P.default.login({\"success\":function success(e){(0,S.getRechargeOpenid)(e.code).then(function(e){var t={\"priceType\":i[g].id,\"openid\":e.openid};(0,S.getRechargeOrder)(t).then(function(e){P.default.requestPayment(O({},e.payData)).then(function(){f(l+n),P.default.showModal({\"title\":\"恭喜您\",\"content\":\"您已成功充值\"+n+\"个积分\",\"cancelText\":\"会员中心\",\"confirmText\":\"继续充值\",\"success\":function success(e){e.cancel&&P.default.reLaunch({\"url\":\"/pages/index/index?type=\"+$.MEMBER})}})}).catch(function(){(0,j.errMsg)(\"用户取消充值\")})}).catch(function(){(0,j.errMsg)(\"网络异常，充值失败，客服电话\"+x.SERVERPHONE)})}).catch(function(){(0,j.ShowActionModal)(\"充值失败，请联系客服电话\"+x.SERVERPHONE)})}})}()};var m=i.map(function(e,t){e={\"$original\":(0,w.internal_get_original)(e)};var n=\"gczzz\"+t;return r.anonymousFunc0Map[n]=function(){return function userChooseItem(n){y(n);var e=(0,F.getPointNumber)(i[n].price,i[n].integral);b(e);var t=JSON.parse(JSON.stringify(i));t.map(function(e,t){e.default=t==n?\"1\":\"0\"}),u(t)}(t)},{\"_$indexKey\":n,\"$loopState__temp2\":(0,E.default)({\"recharge-list-box\":!0,\"recharge-list-box-active\":t===g}),\"$original\":e.$original}});return Object.assign(this.__state,{\"loopArray75\":m,\"lists\":i,\"integral\":l,\"current\":g,\"price\":_}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.anonymousFunc0Map[e]&&(t=this.anonymousFunc0Map)[e].apply(t,r)}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(){}}]),a=o=Recharge,o.$$events=[\"anonymousFunc0\",\"anonymousFunc1\"],o.$$componentPath=\"pages/recharge/index\",a);function Recharge(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Recharge);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=n=_possibleConstructorReturn(this,(e=Recharge.__proto__||Object.getPrototypeOf(Recharge)).call.apply(e,[this].concat(o)))).$usedState=[\"loopArray75\",\"lists\",\"integral\",\"current\",\"price\"],n.anonymousFunc0Map={},n.customComponents=[\"AtMessage\"],_possibleConstructorReturn(n,t)}t.default=i,Component(n(0).default.createComponent(i,!0))}},[[368,0,1,2,3]]]);","extractedComments":[]}