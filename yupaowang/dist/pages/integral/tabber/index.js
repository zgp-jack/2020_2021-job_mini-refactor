(swan.webpackJsonp=swan.webpackJsonp||[]).push([[62],{"185":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var $e=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var a=[],n=!0,o=!1,i=void 0;try{for(var r,u=t[Symbol.iterator]();!(n=(r=u.next()).done)&&(a.push(r.value),!e||a.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e,a){return e&&defineProperties(t.prototype,e),a&&defineProperties(t,a),t};function defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var je=a(0),De=_interopRequireDefault(je),Le=a(2),Ne=a(7),Be=a(1),ze=a(16),Qe=a(8),Ke=a(3),Ue=a(4),qe=_interopRequireDefault(Ue);function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}a(186);var o=(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Tabber,De.default.Component),n(Tabber,[{"key":"_constructor","value":function _constructor(t){(function get(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:get(o,e,a)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(a):void 0})(Tabber.prototype.__proto__||Object.getPrototypeOf(Tabber.prototype),"_constructor",this).call(this,t),this.$$refs=new De.default.RefsArray}},{"key":"_createData","value":function _createData(t,e,a){var o=this;this.__state=t||this.state||{},this.__props=e||this.props||{};var n=this.$prefix,i=(0,je.genCompid)(n+"$compid__63"),r=$e(i,2),u=r[0],s=r[1],l=(0,je.genCompid)(n+"$compid__64"),c=$e(l,2),p=c[0],y=c[1],f=(0,Ke.useSelector)(function(t){return t.User.login}),m=(0,je.useRouter)().params,d=m.info,g=m.office,v=(0,je.useState)(!1),_=$e(v,2),b=_[0],h=_[1],S=(0,je.useState)(!1),F=$e(S,2),T=F[0],k=F[1],C=(0,je.useState)(d),w=$e(C,2),I=w[0],x=w[1],A=(0,je.useState)([]),O=$e(A,2),M=O[0],E=O[1],R=(0,je.useState)(""),P=$e(R,2),$=P[0],j=P[1],D=(0,je.useState)(""),L=$e(D,2),N=L[0],B=L[1],z=(0,je.useState)(""),Q=$e(z,2),K=Q[0],U=Q[1],q=(0,je.useState)(""),G=$e(q,2),J=G[0],V=G[1],Y=(0,je.useState)(""),H=$e(Y,2),W=H[0],X=H[1],Z=(0,je.useState)("0"),tt=$e(Z,2),et=tt[0],at=tt[1],nt=(0,je.useState)("0"),ot=$e(nt,2),it=ot[0],rt=ot[1],ut=(0,je.useState)({"lists":[],"next_page":0,"stime":"0","bak":"0"}),st=$e(ut,2),lt=st[0],ct=st[1],pt=(0,je.useState)({"get":0,"expend":0}),yt=$e(pt,2),ft=(yt[0],yt[1]),mt=(0,je.useState)(!1),dt=$e(mt,2),gt=dt[0],vt=dt[1],_t=(0,je.useState)(),bt=$e(_t,2),ht=bt[0],St=bt[1],Ft=(0,je.useState)(!1),Tt=$e(Ft,2),kt=Tt[0],Ct=Tt[1],wt=(0,je.useState)(""),It=$e(wt,2),xt=It[0],At=(It[1],(0,je.useState)("")),Ot=$e(At,2),Mt=Ot[0],Et=Ot[1],Rt=(0,je.useState)({"y":"0","m":"0","stime":"0","type":0,"bak":"0","system_type":(0,Ne.getSystemInfo)(),"flag":!1}),Pt=$e(Rt,2),$t=Pt[0],jt=Pt[1],Dt=(0,je.useState)(!1),Lt=$e(Dt,2),Nt=Lt[0],Bt=Lt[1],zt=(0,je.useState)({"time":"","sortType":"0","flag":!1,"listType":"0"}),Qt=$e(zt,2),Kt=Qt[0],Ut=Qt[1],qt=(0,je.useState)({"time":"","sortType":"0","flag":!1,"listType":"0"}),Gt=$e(qt,2),Jt=Gt[0],Vt=Gt[1],Yt=(0,je.useState)(0),Ht=$e(Yt,2),Wt=Ht[0],Xt=Ht[1],Zt=(0,je.useState)([]),te=$e(Zt,2),ee=te[0],ae=te[1],ne=(0,je.useState)([]),oe=$e(ne,2),ie=oe[0],re=oe[1],ue=(0,je.useState)(!1),se=$e(ue,2),le=se[0],ce=se[1],pe=(0,je.useState)(!1),ye=$e(pe,2),fe=ye[0],me=ye[1],de=(0,je.useState)([{"type":"0","name":"积分来源"},{"type":"1","name":"积分消耗"}]),ge=$e(de,1)[0],ve=(0,je.useState)(""),_e=$e(ve,2),be=_e[0],he=_e[1],Se=(0,je.useState)(0),Fe=$e(Se,2),Te=Fe[0],ke=Fe[1],Ce=(0,je.useState)(!1),we=$e(Ce,2),Ie=we[0],xe=we[1];function Kc(t){h(!0),k(!1);var e=t.target.value.split("-");X(e[0]+"年"+e[1]+"月"),V(t.target.value);var a=void 0;if("0"===I)for(var n=0;n<M.length;n++)M[n].name===ee[et]&&(a=M[n].type);else for(var o=0;o<M.length;o++)M[o].name===ie[it]&&(a=M[o].type);var i={"y":e[0],"m":e[1],"stime":"0","source_type":a,"type":a,"bak":"0","system_type":(0,Ne.getSystemInfo)(),"flag":!0};jt(i)}(0,je.useEffect)(function(){xe((0,Qe.isIos)());var t="0"===I?"鱼泡网-积分来源记录":"鱼泡网-积分消耗记录";De.default.setNavigationBarTitle({"title":t});var e=new Date,a=e.getFullYear(),n=e.getMonth()+1;if(1<=n&&n<=9&&(n="0"+n),U(a+"-"+n),"0"===I)if(le){if(Kt.flag){var o=Kt.time.split("-"),i={"y":o[0],"m":o[1],"stime":"0","source_type":Kt.sortType,"bak":"0","system_type":(0,Ne.getSystemInfo)(),"flag":!0,"office":g};j(ee[Kt.listType]),X(o[0]+"年"+o[1]+"月"),V(Kt.time),Xt(parseInt(Kt.listType)),jt(i)}}else Oe();else if(fe){var r=Jt.time.split("-"),u={"y":r[0],"m":r[1],"stime":"0","type":Jt.sortType,"bak":"0","system_type":(0,Ne.getSystemInfo)(),"flag":!0};j(ie[Jt.listType]),X(r[0]+"年"+r[1]+"月"),V(Jt.time),Xt(parseInt(Jt.listType)),jt(u)}else Ae()},[I]),(0,je.useEffect)(function(){$t.flag&&("0"===I?Me:Ee)()},[$t,f]);var Ae=function integralExpendConfig(){(0,Le.integralExpendConfigAction)().then(function(t){B(t.data.min.y+"-"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});E(t.data.types),re(e),me(!0),j("消耗分类");var a=t.data.default.y+"-"+t.data.default.m;V(a),X(t.data.default.y+"年"+t.data.default.m+"月");var n={"y":t.data.default.y,"m":t.data.default.m,"stime":"0","type":0,"bak":"0","system_type":(0,Ne.getSystemInfo)(),"flag":!0};jt(n)})},Oe=function integralSourceConfig(){var t={"office":g,"system_type":(0,Ne.getSystemInfo)()};(0,Le.integralSourceConfigAction)(t).then(function(t){B(t.data.min.y+"-"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});E(t.data.types),ae(e),ce(!0),j("来源分类");var a=t.data.default.y+"-"+t.data.default.m;V(a),X(t.data.default.y+"年"+t.data.default.m+"月");var n={"y":t.data.default.y,"m":t.data.default.m,"stime":"0","source_type":0,"bak":"0","system_type":(0,Ne.getSystemInfo)(),"flag":!0,"office":g};jt(n)})},Me=function integralSourceLists(){(0,Le.integralSourceListsAction)($t).then(function(t){Nt||(T||(ft(t.data.sum_data),k(!0)),b?(ct({"lists":[].concat(_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}),h(!1)):ct({"lists":[].concat(_toConsumableArray(lt.lists),_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}))})},Ee=function integralExpendLists(){(0,Le.integralExpendListsAction)($t).then(function(t){Nt||(T||(ft(t.data.sum_data),k(!0)),b?(ct({"lists":[].concat(_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}),h(!1)):ct({"lists":[].concat(_toConsumableArray(lt.lists),_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}))})};(0,je.useReachBottom)(function(){if(0!==lt.next_page){var t=J.split("-"),e=void 0;if("0"===I)for(var a=0;a<M.length;a++)M[a].name===ee[et]&&(e=M[a].type);else for(var n=0;n<M.length;n++)M[n].name===ie[it]&&(e=M[n].type);var o={"y":t[0],"m":t[1],"stime":lt.stime,"source_type":e,"type":e,"bak":"0","system_type":"","flag":!0};jt(o)}else Bt(!0)}),this.anonymousFunc0=function handleBgMove(t){return t.stopPropagation(),!gt},this.anonymousFunc2=function(t){return Kc(t)},this.anonymousFunc3=function(t){return Kc(t)},this.anonymousFunc4=function(t){return function handleClick(t){h(!0),k(!1);var e=void 0;if("0"===I){at(t.detail.value),j(ee[t.detail.value]);for(var a=0;a<M.length;a++)M[a].name===ee[t.detail.value]&&(e=M[a].type)}else{j(ie[t.detail.value]),rt(t.detail.value);for(var n=0;n<M.length;n++)M[n].name===ie[t.detail.value]&&(e=M[n].type)}var o=J.split("-"),i={"y":o[0],"m":o[1],"stime":"0","type":e,"source_type":e,"bak":"0","system_type":(0,Ne.getSystemInfo)(),"flag":!0};jt(i)}(t)},this.anonymousFunc6=function(){vt(!1)},this.anonymousFunc7=function(){De.default.makePhoneCall({"phoneNumber":ht.user_mobile})},this.anonymousFunc8=function(){return function handleComplaint(t){De.default.navigateTo({"url":"/pages/newcomplaint/index?infoId="+t+"&type=job&page=detai"})}(ht.id)},this.anonymousFunc9=function(){De.default.makePhoneCall({"phoneNumber":ht.user_mobile})};var Re=ge.map(function(t,e){t={"privateOriginal":(0,je.internal_get_original)(t)};var a="i"+e,n="ibzzz"+e;return o.anonymousFunc1Map[n]=function(){return function handleJump(t){if(t!=I){k(!1),Bt(!1),h(!0);var e=void 0;if("0"==I)for(var a=0;a<M.length;a++)M[a].name===ee[et]&&(e=M[a].type);else for(var n=0;n<M.length;n++)M[n].name===ie[it]&&(e=M[n].type);"0"==t?(x(t),Vt({"time":J,"sortType":e,"flag":!0,"listType":it})):"1"==t&&(x(t),Ut({"time":J,"sortType":e,"flag":!0,"listType":et}))}}(t.privateOriginal.type)},{"loopState__temp2":a,"_$indexKey":n,"privateOriginal":t.privateOriginal}}),Pe=lt.lists.map(function(t,e){t={"privateOriginal":(0,je.internal_get_original)(t)};var a="i"+e,n="iczzz"+e;return o.anonymousFunc5Map[n]=function(){return function handleModal(t,e){(0,Le.integralUseInfoAction)(t,e).then(function(t){var e=t.errcode,a=t.errmsg,n=t.info,o=t.data;if("deleted"!==t.errcode&&"fail"!==t.errcode){he("ok"===e?n.type:e);var i=void 0;i=o?o.show_complain:n.show_complain,ke(i),St(n||o),vt(!0)}else De.default.showModal({"title":"温馨提示","content":a,"showCancel":!1})})}(t.privateOriginal.id,t.privateOriginal.time)},{"loopState__temp4":a,"_$indexKey2":n,"privateOriginal":t.privateOriginal}});return lt.lists.length||je.propsManager.set({"text":"0"===I?"暂无积分来源记录":"暂无积分消耗记录"},s,u),kt&&je.propsManager.set({"display":kt,"textarea":Mt,"handleTextarea":function handleTextarea(t){var e=t.detail.value;Et(e)},"setComplaintModal":Ct,"handleSubmit":function handleSubmit(){if(!(0,Qe.isVaildVal)(Mt,15,500))return(0,qe.default)("输入内容不少于15个字且必须包含文字"),!1;var t={"content":Mt,"type":"job","infoId":xt};(0,Le.publishComplainAction)(t).then(function(t){"ok"===t.errcode&&(0,ze.SubscribeToNews)("complain",function(){(0,Ue.showModalTip)({"tips":t.errmsg,"callback":function callback(){Ct(!1),vt(!1)}})})})}},y,p),Object.assign(this.__state,{"data":lt,"modalData":ht,"loopArray70":Re,"loopArray71":Pe,"$compid__63":s,"$compid__64":y,"title":$,"tabBar":ge,"initInfo":I,"SERIES":Be.SERIES,"QQSERIES":Be.QQSERIES,"ios":Ie,"time":J,"IMGCDNURL":Be.IMGCDNURL,"start":N,"end":K,"sourceList":ee,"consumeList":ie,"startType":Wt,"modal":gt,"modelType":be,"showIsReport":Te,"complaintModal":kt,"showTime":W}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(t){t.stopPropagation()}},{"key":"anonymousFunc1","value":function anonymousFunc1(t){for(var e,a=arguments.length,n=Array(1<a?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return this.anonymousFunc1Map[t]&&(e=this.anonymousFunc1Map)[t].apply(e,n)}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(t){for(var e,a=arguments.length,n=Array(1<a?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return this.anonymousFunc5Map[t]&&(e=this.anonymousFunc5Map)[t].apply(e,n)}},{"key":"anonymousFunc6","value":function anonymousFunc6(){}},{"key":"anonymousFunc7","value":function anonymousFunc7(){}},{"key":"anonymousFunc8","value":function anonymousFunc8(){}},{"key":"anonymousFunc9","value":function anonymousFunc9(){}}]),Tabber);function Tabber(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tabber);var t=function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Tabber.__proto__||Object.getPrototypeOf(Tabber)).apply(this,arguments));return t.config={"navigationBarTitleText":""},t.$usedState=["data","modalData","loopArray70","loopArray71","$compid__63","$compid__64","title","tabBar","initInfo","SERIES","QQSERIES","ios","time","IMGCDNURL","start","end","sourceList","consumeList","startType","modal","modelType","showIsReport","complaintModal","showTime"],t.anonymousFunc1Map={},t.anonymousFunc5Map={},t.customComponents=["Nodata","Report"],t}o.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9"],o.$$componentPath="pages/integral/tabber/index",o.config={"navigationBarTitleText":""},e.default=o,Page(a(0).default.createComponent(o,!0))},"186":function(t,e,a){}},[[185,0,1]]]);