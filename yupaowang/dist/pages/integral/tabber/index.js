(swan.webpackJsonp=swan.webpackJsonp||[]).push([[54],{"182":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var Fe=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var a=[],n=!0,o=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done)&&(a.push(r.value),!e||a.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e,a){return e&&defineProperties(t.prototype,e),a&&defineProperties(t,a),t};function defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ce=a(0),xe=_interopRequireDefault(Ce),Ie=a(2),we=a(7),Ae=a(1),Ee=a(16),Oe=a(8),Re=a(3),Pe=a(4),$e=_interopRequireDefault(Pe);function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}a(183);var o=(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Tabber,xe.default.Component),n(Tabber,[{"key":"_constructor","value":function _constructor(t){(function get(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:get(o,e,a)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(a):void 0})(Tabber.prototype.__proto__||Object.getPrototypeOf(Tabber.prototype),"_constructor",this).call(this,t),this.$$refs=new xe.default.RefsArray}},{"key":"_createData","value":function _createData(t,e,a){this.__state=t||this.state||{},this.__props=e||this.props||{};var n=this.$prefix,o=(0,Ce.genCompid)(n+"$compid__64"),i=Fe(o,2),r=i[0],s=i[1],u=(0,Ce.genCompid)(n+"$compid__65"),l=Fe(u,2),c=l[0],f=l[1],y=(0,Re.useSelector)(function(t){return t.User.login}),p=(0,Ce.useRouter)().params,m=p.info,d=p.office,g=(0,Ce.useState)(!1),v=Fe(g,2),_=v[0],b=v[1],h=(0,Ce.useState)(!1),S=Fe(h,2),T=S[0],k=S[1],F=(0,Ce.useState)(m),C=Fe(F,2),x=C[0],I=C[1],w=(0,Ce.useState)([]),A=Fe(w,2),E=A[0],O=A[1],R=(0,Ce.useState)(""),P=Fe(R,2),$=P[0],j=P[1],D=(0,Ce.useState)(""),M=Fe(D,2),L=M[0],N=M[1],Q=(0,Ce.useState)(""),B=Fe(Q,2),U=B[0],q=B[1],G=(0,Ce.useState)(""),J=Fe(G,2),V=J[0],Y=J[1],z=(0,Ce.useState)(""),H=Fe(z,2),K=H[0],W=H[1],X=(0,Ce.useState)("0"),Z=Fe(X,2),tt=Z[0],et=Z[1],at=(0,Ce.useState)("0"),nt=Fe(at,2),ot=nt[0],it=nt[1],rt=(0,Ce.useState)({"lists":[],"next_page":0,"stime":"0","bak":"0"}),st=Fe(rt,2),ut=st[0],lt=st[1],ct=(0,Ce.useState)({"get":0,"expend":0}),ft=Fe(ct,2),yt=ft[0],pt=ft[1],mt=(0,Ce.useState)(!1),dt=Fe(mt,2),gt=dt[0],vt=dt[1],_t=(0,Ce.useState)(),bt=Fe(_t,2),ht=bt[0],St=(bt[1],(0,Ce.useState)(!1)),Tt=Fe(St,2),kt=Tt[0],Ft=Tt[1],Ct=(0,Ce.useState)(""),xt=Fe(Ct,2),It=xt[0],wt=xt[1],At=(0,Ce.useState)(""),Et=Fe(At,2),Ot=Et[0],Rt=Et[1],Pt=(0,Ce.useState)({"y":"0","m":"0","stime":"0","type":0,"bak":"0","system_type":(0,we.getSystemInfo)(),"flag":!1}),$t=Fe(Pt,2),jt=$t[0],Dt=$t[1],Mt=(0,Ce.useState)(!1),Lt=Fe(Mt,2),Nt=Lt[0],Qt=Lt[1],Bt=(0,Ce.useState)({"time":"","sortType":"0","flag":!1,"listType":"0"}),Ut=Fe(Bt,2),qt=Ut[0],Gt=Ut[1],Jt=(0,Ce.useState)({"time":"","sortType":"0","flag":!1,"listType":"0"}),Vt=Fe(Jt,2),Yt=Vt[0],zt=Vt[1],Ht=(0,Ce.useState)(0),Kt=Fe(Ht,2),Wt=Kt[0],Xt=Kt[1],Zt=(0,Ce.useState)([]),te=Fe(Zt,2),ee=te[0],ae=te[1],ne=(0,Ce.useState)([]),oe=Fe(ne,2),ie=oe[0],re=oe[1],se=(0,Ce.useState)(!1),ue=Fe(se,2),le=ue[0],ce=ue[1],fe=(0,Ce.useState)(!1),ye=Fe(fe,2),pe=ye[0],me=ye[1],de=(0,Ce.useState)(!1),ge=Fe(de,2),ve=ge[0],_e=ge[1];function yc(t){b(!0),k(!1);var e=t.target.value.split("-");W(e[0]+"年"+e[1]+"月"),Y(t.target.value);var a=void 0;if("0"===x)for(var n=0;n<E.length;n++)E[n].name===ee[tt]&&(a=E[n].type);else for(var o=0;o<E.length;o++)E[o].name===ie[ot]&&(a=E[o].type);var i={"y":e[0],"m":e[1],"stime":"0","source_type":a,"type":a,"bak":"0","system_type":(0,we.getSystemInfo)(),"flag":!0};Dt(i)}(0,Ce.useEffect)(function(){_e((0,Oe.isIos)());var t="0"===x?"鱼泡网-积分来源记录":"鱼泡网-积分消耗记录";if(xe.default.setNavigationBarTitle({"title":t}),y){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1;if(1<=n&&n<=9&&(n="0"+n),q(a+"-"+n),"0"===x)if(le){if(qt.flag){var o=qt.time.split("-"),i={"y":o[0],"m":o[1],"stime":"0","source_type":qt.sortType,"bak":"0","system_type":(0,we.getSystemInfo)(),"flag":!0,"office":d};j(ee[qt.listType]),W(o[0]+"年"+o[1]+"月"),Y(qt.time),Xt(parseInt(qt.listType)),Dt(i)}}else he();else if(pe){var r=Yt.time.split("-"),s={"y":r[0],"m":r[1],"stime":"0","type":Yt.sortType,"bak":"0","system_type":(0,we.getSystemInfo)(),"flag":!0};j(ie[Yt.listType]),W(r[0]+"年"+r[1]+"月"),Y(Yt.time),Xt(parseInt(Yt.listType)),Dt(s)}else be()}},[x]),(0,Ce.useEffect)(function(){y&&jt.flag&&("0"===x?Se:Te)()},[jt,y]);var be=function integralExpendConfig(){(0,Ie.integralExpendConfigAction)().then(function(t){N(t.data.min.y+"-"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});O(t.data.types),re(e),me(!0),j("消耗分类");var a=t.data.default.y+"-"+t.data.default.m;Y(a),W(t.data.default.y+"年"+t.data.default.m+"月");var n={"y":t.data.default.y,"m":t.data.default.m,"stime":"0","type":0,"bak":"0","system_type":(0,we.getSystemInfo)(),"flag":!0};Dt(n)})},he=function integralSourceConfig(){var t={"office":d,"system_type":(0,we.getSystemInfo)()};(0,Ie.integralSourceConfigAction)(t).then(function(t){N(t.data.min.y+"-"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});O(t.data.types),ae(e),ce(!0),j("来源分类");var a=t.data.default.y+"-"+t.data.default.m;Y(a),W(t.data.default.y+"年"+t.data.default.m+"月");var n={"y":t.data.default.y,"m":t.data.default.m,"stime":"0","source_type":0,"bak":"0","system_type":(0,we.getSystemInfo)(),"flag":!0,"office":d};Dt(n)})},Se=function integralSourceLists(){(0,Ie.integralSourceListsAction)(jt).then(function(t){Nt||(T||(pt(t.data.sum_data),k(!0)),_?(lt({"lists":[].concat(_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}),b(!1)):lt({"lists":[].concat(_toConsumableArray(ut.lists),_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}))})},Te=function integralExpendLists(){(0,Ie.integralExpendListsAction)(jt).then(function(t){Nt||(T||(pt(t.data.sum_data),k(!0)),_?(lt({"lists":[].concat(_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}),b(!1)):lt({"lists":[].concat(_toConsumableArray(ut.lists),_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}))})};(0,Ce.useReachBottom)(function(){if(0!==ut.next_page){var t=V.split("-"),e=void 0;if("0"===x)for(var a=0;a<E.length;a++)E[a].name===ee[tt]&&(e=E[a].type);else for(var n=0;n<E.length;n++)E[n].name===ie[ot]&&(e=E[n].type);var o={"y":t[0],"m":t[1],"stime":ut.stime,"source_type":e,"type":e,"bak":"0","system_type":"","flag":!0};Dt(o)}else Qt(!0)}),this.anonymousFunc0=function(t){return yc(t)},this.anonymousFunc1=function(t){return yc(t)},this.anonymousFunc2=function(t){return function handleClick(t){b(!0),k(!1);var e=void 0;if("0"===x){et(t.detail.value),j(ee[t.detail.value]);for(var a=0;a<E.length;a++)E[a].name===ee[t.detail.value]&&(e=E[a].type)}else{j(ie[t.detail.value]),it(t.detail.value);for(var n=0;n<E.length;n++)E[n].name===ie[t.detail.value]&&(e=E[n].type)}var o=V.split("-"),i={"y":o[0],"m":o[1],"stime":"0","type":e,"source_type":e,"bak":"0","system_type":(0,we.getSystemInfo)(),"flag":!0};Dt(i)}(t)},this.anonymousFunc3=function handleJump(){k(!1),Qt(!1),b(!0);var t=void 0;if("0"===x)for(var e=0;e<E.length;e++)E[e].name===ee[tt]&&(t=E[e].type);else for(var a=0;a<E.length;a++)E[a].name===ie[ot]&&(t=E[a].type);"0"===x?(I("1"),Gt({"time":V,"sortType":t,"flag":!0,"listType":tt})):"1"===x&&(I("0"),zt({"time":V,"sortType":t,"flag":!0,"listType":ot}))},this.anonymousFunc4=function(){vt(!1)},this.anonymousFunc5=function(){xe.default.makePhoneCall({"phoneNumber":ht.user_mobile})},this.anonymousFunc6=function(){return function handleComplaint(t){Ft(!0),wt(t)}(ht.id)};var ke="1"===x&&gt&&ht?ht.classifyName.map(function(t,e){return t={"privateOriginal":(0,Ce.internal_get_original)(t)},{"loopState__temp2":"1"===x&&gt&&ht?e+e:null,"privateOriginal":t.privateOriginal}}):[];return ut.lists.length||Ce.propsManager.set({"text":"0"===x?"暂无积分来源记录":"暂无积分消耗记录"},s,r),kt&&Ce.propsManager.set({"display":kt,"textarea":Ot,"handleTextarea":function handleTextarea(t){var e=t.detail.value;Rt(e)},"setComplaintModal":Ft,"handleSubmit":function handleSubmit(){if(!(0,Oe.isVaildVal)(Ot,15,500))return(0,$e.default)("输入内容不少于15个字且必须包含文字"),!1;var t={"content":Ot,"type":"job","infoId":It};(0,Ie.publishComplainAction)(t).then(function(t){"ok"===t.errcode&&(0,Ee.SubscribeToNews)("complain",function(){(0,Pe.showModalTip)({"tips":t.errmsg,"callback":function callback(){Ft(!1),vt(!1)}})})})}},f,c),Object.assign(this.__state,{"data":ut,"modalData":ht,"loopArray73":ke,"$compid__64":s,"$compid__65":f,"SERIES":Ae.SERIES,"QQSERIES":Ae.QQSERIES,"ios":ve,"time":V,"IMGCDNURL":Ae.IMGCDNURL,"start":L,"end":U,"initInfo":x,"sourceList":ee,"consumeList":ie,"startType":Wt,"modal":gt,"complaintModal":kt,"showTime":K,"title":$,"num":yt}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(){}},{"key":"anonymousFunc6","value":function anonymousFunc6(){}}]),Tabber);function Tabber(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tabber);var t=function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Tabber.__proto__||Object.getPrototypeOf(Tabber)).apply(this,arguments));return t.config={"navigationBarTitleText":""},t.$usedState=["data","modalData","loopArray73","$compid__64","$compid__65","SERIES","QQSERIES","ios","time","IMGCDNURL","start","end","initInfo","sourceList","consumeList","startType","modal","complaintModal","showTime","title","num"],t.customComponents=["Auth","Nodata","Report"],t}o.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6"],o.$$componentPath="pages/integral/tabber/index",o.config={"navigationBarTitleText":""},e.default=o,Page(a(0).default.createComponent(o,!0))},"183":function(t,e,a){}},[[182,0,1]]]);