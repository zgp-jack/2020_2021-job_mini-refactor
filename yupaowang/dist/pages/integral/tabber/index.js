(swan.webpackJsonp=swan.webpackJsonp||[]).push([[50],{"174":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var he=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var a=[],n=!0,o=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done)&&(a.push(r.value),!e||a.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e,a){return e&&defineProperties(t.prototype,e),a&&defineProperties(t,a),t};function defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Se=a(0),Te=_interopRequireDefault(Se),ke=a(2),Ce=a(6),Fe=a(1),xe=a(16),we=a(8),Ae=a(3),Oe=a(4),Ie=_interopRequireDefault(Oe);function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}a(175);var o=(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Tabber,Te.default.Component),n(Tabber,[{"key":"_constructor","value":function _constructor(t){(function get(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:get(o,e,a)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(a):void 0})(Tabber.prototype.__proto__||Object.getPrototypeOf(Tabber.prototype),"_constructor",this).call(this,t),this.$$refs=new Te.default.RefsArray}},{"key":"_createData","value":function _createData(t,e,a){this.__state=t||this.state||{},this.__props=e||this.props||{};var n=this.$prefix,o=(0,Se.genCompid)(n+"$compid__64"),i=he(o,2),r=i[0],s=i[1],u=(0,Se.genCompid)(n+"$compid__65"),l=he(u,2),c=l[0],f=l[1],p=(0,Ae.useSelector)(function(t){return t.User.login}),y=(0,Se.useRouter)().params,m=y.info,d=y.office,g=(0,Se.useState)(!1),_=he(g,2),v=_[0],b=_[1],h=(0,Se.useState)(!1),S=he(h,2),T=S[0],k=S[1],C=(0,Se.useState)(m),F=he(C,2),x=F[0],w=F[1],A=(0,Se.useState)([]),O=he(A,2),I=O[0],P=O[1],$=(0,Se.useState)(""),j=he($,2),D=j[0],M=j[1],R=(0,Se.useState)(""),L=he(R,2),E=L[0],N=L[1],B=(0,Se.useState)(""),U=he(B,2),q=U[0],G=U[1],J=(0,Se.useState)(""),V=he(J,2),Y=V[0],z=V[1],H=(0,Se.useState)(""),K=he(H,2),Q=K[0],W=K[1],X=(0,Se.useState)("0"),Z=he(X,2),tt=Z[0],et=Z[1],at=(0,Se.useState)("0"),nt=he(at,2),ot=nt[0],it=nt[1],rt=(0,Se.useState)({"lists":[],"next_page":0,"stime":"0","bak":"0"}),st=he(rt,2),ut=st[0],lt=st[1],ct=(0,Se.useState)({"get":0,"expend":0}),ft=he(ct,2),pt=ft[0],yt=ft[1],mt=(0,Se.useState)(!1),dt=he(mt,2),gt=dt[0],_t=dt[1],vt=(0,Se.useState)(),bt=he(vt,2),ht=bt[0],St=(bt[1],(0,Se.useState)(!1)),Tt=he(St,2),kt=Tt[0],Ct=Tt[1],Ft=(0,Se.useState)(""),xt=he(Ft,2),wt=xt[0],At=xt[1],Ot=(0,Se.useState)(""),It=he(Ot,2),Pt=It[0],$t=It[1],jt=(0,Se.useState)({"y":"0","m":"0","stime":"0","type":0,"bak":"0","system_type":(0,Ce.getSystemInfo)(),"flag":!1}),Dt=he(jt,2),Mt=Dt[0],Rt=Dt[1],Lt=(0,Se.useState)(!1),Et=he(Lt,2),Nt=Et[0],Bt=Et[1],Ut=(0,Se.useState)({"time":"","sortType":"0","flag":!1,"listType":"0"}),qt=he(Ut,2),Gt=qt[0],Jt=qt[1],Vt=(0,Se.useState)({"time":"","sortType":"0","flag":!1,"listType":"0"}),Yt=he(Vt,2),zt=Yt[0],Ht=Yt[1],Kt=(0,Se.useState)(0),Qt=he(Kt,2),Wt=Qt[0],Xt=Qt[1],Zt=(0,Se.useState)([]),te=he(Zt,2),ee=te[0],ae=te[1],ne=(0,Se.useState)([]),oe=he(ne,2),ie=oe[0],re=oe[1],se=(0,Se.useState)(!1),ue=he(se,2),le=ue[0],ce=ue[1],fe=(0,Se.useState)(!1),pe=he(fe,2),ye=pe[0],me=pe[1];(0,Se.useEffect)(function(){var t="0"===x?"鱼泡网-积分来源记录":"鱼泡网-积分消耗记录";if(Te.default.setNavigationBarTitle({"title":t}),p){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1;if(1<=n&&n<=9&&(n="0"+n),G(a+"-"+n),"0"===x)if(le){if(Gt.flag){var o=Gt.time.split("-"),i={"y":o[0],"m":o[1],"stime":"0","source_type":Gt.sortType,"bak":"0","system_type":(0,Ce.getSystemInfo)(),"flag":!0,"office":d};M(ee[Gt.listType]),W(o[0]+"年"+o[1]+"月"),z(Gt.time),Xt(parseInt(Gt.listType)),Rt(i)}}else ge();else if(ye){var r=zt.time.split("-"),s={"y":r[0],"m":r[1],"stime":"0","type":zt.sortType,"bak":"0","system_type":(0,Ce.getSystemInfo)(),"flag":!0};M(ie[zt.listType]),W(r[0]+"年"+r[1]+"月"),z(zt.time),Xt(parseInt(zt.listType)),Rt(s)}else de()}},[x]),(0,Se.useEffect)(function(){p&&Mt.flag&&("0"===x?_e:ve)()},[Mt]);var de=function integralExpendConfig(){(0,ke.integralExpendConfigAction)().then(function(t){N(t.data.min.y+"-"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});P(t.data.types),re(e),me(!0),M("消耗分类");var a=t.data.default.y+"-"+t.data.default.m;z(a),W(t.data.default.y+"年"+t.data.default.m+"月");var n={"y":t.data.default.y,"m":t.data.default.m,"stime":"0","type":0,"bak":"0","system_type":(0,Ce.getSystemInfo)(),"flag":!0};Rt(n)})},ge=function integralSourceConfig(){var t={"office":d,"system_type":(0,Ce.getSystemInfo)()};(0,ke.integralSourceConfigAction)(t).then(function(t){N(t.data.min.y+"-"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});P(t.data.types),ae(e),ce(!0),M("来源分类");var a=t.data.default.y+"-"+t.data.default.m;z(a),W(t.data.default.y+"年"+t.data.default.m+"月");var n={"y":t.data.default.y,"m":t.data.default.m,"stime":"0","source_type":0,"bak":"0","system_type":(0,Ce.getSystemInfo)(),"flag":!0,"office":d};Rt(n)})},_e=function integralSourceLists(){(0,ke.integralSourceListsAction)(Mt).then(function(t){Nt||(T||(yt(t.data.sum_data),k(!0)),v?(lt({"lists":[].concat(_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}),b(!1)):lt({"lists":[].concat(_toConsumableArray(ut.lists),_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}))})},ve=function integralExpendLists(){(0,ke.integralExpendListsAction)(Mt).then(function(t){Nt||(T||(yt(t.data.sum_data),k(!0)),v?(lt({"lists":[].concat(_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}),b(!1)):lt({"lists":[].concat(_toConsumableArray(ut.lists),_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}))})};(0,Se.useReachBottom)(function(){if(0!==ut.next_page){var t=Y.split("-"),e=void 0;if("0"===x)for(var a=0;a<I.length;a++)I[a].name===ee[tt]&&(e=I[a].type);else for(var n=0;n<I.length;n++)I[n].name===ie[ot]&&(e=I[n].type);var o={"y":t[0],"m":t[1],"stime":ut.stime,"source_type":e,"type":e,"bak":"0","system_type":"","flag":!0};Rt(o)}else Bt(!0)}),this.anonymousFunc0=function(t){return function handleClckTime(t){b(!0),k(!1);var e=t.target.value.split("-");W(e[0]+"年"+e[1]+"月"),z(t.target.value);var a=void 0;if("0"===x)for(var n=0;n<I.length;n++)I[n].name===ee[tt]&&(a=I[n].type);else for(var o=0;o<I.length;o++)I[o].name===ie[ot]&&(a=I[o].type);var i={"y":e[0],"m":e[1],"stime":"0","source_type":a,"type":a,"bak":"0","system_type":(0,Ce.getSystemInfo)(),"flag":!0};Rt(i)}(t)},this.anonymousFunc1=function(t){return function handleClick(t){b(!0),k(!1);var e=void 0;if("0"===x){et(t.detail.value),M(ee[t.detail.value]);for(var a=0;a<I.length;a++)I[a].name===ee[t.detail.value]&&(e=I[a].type)}else{M(ie[t.detail.value]),it(t.detail.value);for(var n=0;n<I.length;n++)I[n].name===ie[t.detail.value]&&(e=I[n].type)}var o=Y.split("-"),i={"y":o[0],"m":o[1],"stime":"0","type":e,"source_type":e,"bak":"0","system_type":(0,Ce.getSystemInfo)(),"flag":!0};Rt(i)}(t)},this.anonymousFunc2=function handleJump(){k(!1),Bt(!1),b(!0);var t=void 0;if("0"===x)for(var e=0;e<I.length;e++)I[e].name===ee[tt]&&(t=I[e].type);else for(var a=0;a<I.length;a++)I[a].name===ie[ot]&&(t=I[a].type);"0"===x?(w("1"),Jt({"time":Y,"sortType":t,"flag":!0,"listType":tt})):"1"===x&&(w("0"),Ht({"time":Y,"sortType":t,"flag":!0,"listType":ot}))},this.anonymousFunc3=function(){_t(!1)},this.anonymousFunc4=function(){Te.default.makePhoneCall({"phoneNumber":ht.user_mobile})},this.anonymousFunc5=function(){return function handleComplaint(t){Ct(!0),At(t)}(ht.id)};var be="1"===x&&gt&&ht?ht.classifyName.map(function(t,e){return t={"privateOriginal":(0,Se.internal_get_original)(t)},{"loopState__temp2":"1"===x&&gt&&ht?e+e:null,"privateOriginal":t.privateOriginal}}):[];return ut.lists.length||Se.propsManager.set({"text":"0"===x?"暂无积分来源记录":"暂无积分消耗记录"},s,r),kt&&Se.propsManager.set({"display":kt,"textarea":Pt,"handleTextarea":function handleTextarea(t){var e=t.detail.value;$t(e)},"setComplaintModal":Ct,"handleSubmit":function handleSubmit(){if(!(0,we.isVaildVal)(Pt,15,500))return(0,Ie.default)("输入内容不少于15个字且必须包含文字"),!1;var t={"content":Pt,"type":"job","infoId":wt};(0,ke.publishComplainAction)(t).then(function(t){"ok"===t.errcode&&(0,xe.SubscribeToNews)("complain",function(){(0,Oe.showModalTip)({"tips":t.errmsg,"callback":function callback(){Ct(!1),_t(!1)}})})})}},f,c),Object.assign(this.__state,{"data":ut,"modalData":ht,"loopArray71":be,"$compid__64":s,"$compid__65":f,"time":Y,"start":E,"end":q,"IMGCDNURL":Fe.IMGCDNURL,"initInfo":x,"sourceList":ee,"consumeList":ie,"startType":Wt,"modal":gt,"complaintModal":kt,"showTime":Q,"title":D,"num":pt}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(){}}]),Tabber);function Tabber(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tabber);var t=function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Tabber.__proto__||Object.getPrototypeOf(Tabber)).apply(this,arguments));return t.config={"navigationBarTitleText":""},t.$usedState=["data","modalData","loopArray71","$compid__64","$compid__65","time","start","end","IMGCDNURL","initInfo","sourceList","consumeList","startType","modal","complaintModal","showTime","title","num"],t.customComponents=["Auth","Nodata","Report"],t}o.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5"],o.$$componentPath="pages/integral/tabber/index",o.config={"navigationBarTitleText":""},e.default=o,Page(a(0).default.createComponent(o,!0))},"175":function(t,e,a){}},[[174,0,1]]]);