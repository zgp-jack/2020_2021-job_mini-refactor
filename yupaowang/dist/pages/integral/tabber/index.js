(swan.webpackJsonp=swan.webpackJsonp||[]).push([[63],{"187":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var je=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var a=[],n=!0,o=!1,i=void 0;try{for(var r,u=t[Symbol.iterator]();!(n=(r=u.next()).done)&&(a.push(r.value),!e||a.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e,a){return e&&defineProperties(t.prototype,e),a&&defineProperties(t,a),t};function defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var De=a(0),Le=_interopRequireDefault(De),Ne=a(2),Be=a(7),ze=a(1),Qe=a(17),Ke=a(8),Ue=a(3),qe=a(4),Ge=_interopRequireDefault(qe);function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}a(188);var o=(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Tabber,Le.default.Component),n(Tabber,[{"key":"_constructor","value":function _constructor(t){(function get(t,e,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:get(o,e,a)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(a):void 0})(Tabber.prototype.__proto__||Object.getPrototypeOf(Tabber.prototype),"_constructor",this).call(this,t),this.$$refs=new Le.default.RefsArray}},{"key":"_createData","value":function _createData(t,e,a){var o=this;this.__state=t||this.state||{},this.__props=e||this.props||{};var n=this.$prefix,i=(0,De.genCompid)(n+"$compid__64"),r=je(i,2),u=r[0],s=r[1],l=(0,De.genCompid)(n+"$compid__65"),c=je(l,2),p=c[0],y=c[1],f=(0,Ue.useSelector)(function(t){return t.User.login}),m=(0,De.useRouter)().params,d=m.info,g=m.office,v=(0,De.useState)(!1),_=je(v,2),h=_[0],b=_[1],S=(0,De.useState)(!1),F=je(S,2),T=F[0],k=F[1],C=(0,De.useState)(d),w=je(C,2),I=w[0],x=w[1],A=(0,De.useState)([]),O=je(A,2),M=O[0],E=O[1],R=(0,De.useState)(""),P=je(R,2),$=P[0],j=P[1],D=(0,De.useState)(""),L=je(D,2),N=L[0],B=L[1],z=(0,De.useState)(""),Q=je(z,2),K=Q[0],U=Q[1],q=(0,De.useState)(""),G=je(q,2),J=G[0],V=G[1],Y=(0,De.useState)(""),H=je(Y,2),W=H[0],X=H[1],Z=(0,De.useState)("0"),tt=je(Z,2),et=tt[0],at=tt[1],nt=(0,De.useState)("0"),ot=je(nt,2),it=ot[0],rt=ot[1],ut=(0,De.useState)({"lists":[],"next_page":0,"stime":"0","bak":"0"}),st=je(ut,2),lt=st[0],ct=st[1],pt=(0,De.useState)({"get":0,"expend":0}),yt=je(pt,2),ft=(yt[0],yt[1]),mt=(0,De.useState)(!1),dt=je(mt,2),gt=dt[0],vt=dt[1],_t=(0,De.useState)(),ht=je(_t,2),bt=ht[0],St=ht[1],Ft=(0,De.useState)(!1),Tt=je(Ft,2),kt=Tt[0],Ct=Tt[1],wt=(0,De.useState)(""),It=je(wt,2),xt=It[0],At=It[1],Ot=(0,De.useState)(""),Mt=je(Ot,2),Et=Mt[0],Rt=Mt[1],Pt=(0,De.useState)({"y":"0","m":"0","stime":"0","type":0,"bak":"0","system_type":(0,Be.getSystemInfo)(),"flag":!1}),$t=je(Pt,2),jt=$t[0],Dt=$t[1],Lt=(0,De.useState)(!1),Nt=je(Lt,2),Bt=Nt[0],zt=Nt[1],Qt=(0,De.useState)({"time":"","sortType":"0","flag":!1,"listType":"0"}),Kt=je(Qt,2),Ut=Kt[0],qt=Kt[1],Gt=(0,De.useState)({"time":"","sortType":"0","flag":!1,"listType":"0"}),Jt=je(Gt,2),Vt=Jt[0],Yt=Jt[1],Ht=(0,De.useState)(0),Wt=je(Ht,2),Xt=Wt[0],Zt=Wt[1],te=(0,De.useState)([]),ee=je(te,2),ae=ee[0],ne=ee[1],oe=(0,De.useState)([]),ie=je(oe,2),re=ie[0],ue=ie[1],se=(0,De.useState)(!1),le=je(se,2),ce=le[0],pe=le[1],ye=(0,De.useState)(!1),fe=je(ye,2),me=fe[0],de=fe[1],ge=(0,De.useState)([{"type":"0","name":"积分来源"},{"type":"1","name":"积分消耗"}]),ve=je(ge,1)[0],_e=(0,De.useState)(""),he=je(_e,2),be=he[0],Se=he[1],Fe=(0,De.useState)(0),Te=je(Fe,2),ke=Te[0],Ce=Te[1],we=(0,De.useState)(!1),Ie=je(we,2),xe=Ie[0],Ae=Ie[1];function Kc(t){b(!0),k(!1);var e=t.target.value.split("-");X(e[0]+"年"+e[1]+"月"),V(t.target.value);var a=void 0;if("0"===I)for(var n=0;n<M.length;n++)M[n].name===ae[et]&&(a=M[n].type);else for(var o=0;o<M.length;o++)M[o].name===re[it]&&(a=M[o].type);var i={"y":e[0],"m":e[1],"stime":"0","source_type":a,"type":a,"bak":"0","system_type":(0,Be.getSystemInfo)(),"flag":!0};Dt(i)}(0,De.useEffect)(function(){Ae((0,Ke.isIos)());var t="0"===I?"鱼泡网-积分来源记录":"鱼泡网-积分消耗记录";Le.default.setNavigationBarTitle({"title":t});var e=new Date,a=e.getFullYear(),n=e.getMonth()+1;if(1<=n&&n<=9&&(n="0"+n),U(a+"-"+n),"0"===I)if(ce){if(Ut.flag){var o=Ut.time.split("-"),i={"y":o[0],"m":o[1],"stime":"0","source_type":Ut.sortType,"bak":"0","system_type":(0,Be.getSystemInfo)(),"flag":!0,"office":g};j(ae[Ut.listType]),X(o[0]+"年"+o[1]+"月"),V(Ut.time),Zt(parseInt(Ut.listType)),Dt(i)}}else Me();else if(me){var r=Vt.time.split("-"),u={"y":r[0],"m":r[1],"stime":"0","type":Vt.sortType,"bak":"0","system_type":(0,Be.getSystemInfo)(),"flag":!0};j(re[Vt.listType]),X(r[0]+"年"+r[1]+"月"),V(Vt.time),Zt(parseInt(Vt.listType)),Dt(u)}else Oe()},[I,f]),(0,De.useEffect)(function(){jt.flag&&("0"===I?Ee:Re)()},[jt,f]);var Oe=function integralExpendConfig(){(0,Ne.integralExpendConfigAction)().then(function(t){B(t.data.min.y+"-"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});E(t.data.types),ue(e),de(!0),j("消耗分类");var a=t.data.default.y+"-"+t.data.default.m;V(a),X(t.data.default.y+"年"+t.data.default.m+"月");var n={"y":t.data.default.y,"m":t.data.default.m,"stime":"0","type":0,"bak":"0","system_type":(0,Be.getSystemInfo)(),"flag":!0};Dt(n)})},Me=function integralSourceConfig(){var t={"office":g,"system_type":(0,Be.getSystemInfo)()};(0,Ne.integralSourceConfigAction)(t).then(function(t){B(t.data.min.y+"-"+t.data.min.m);var e=t.data.types.map(function(t){return t.name});E(t.data.types),ne(e),pe(!0),j("来源分类");var a=t.data.default.y+"-"+t.data.default.m;V(a),X(t.data.default.y+"年"+t.data.default.m+"月");var n={"y":t.data.default.y,"m":t.data.default.m,"stime":"0","source_type":0,"bak":"0","system_type":(0,Be.getSystemInfo)(),"flag":!0,"office":g};Dt(n)})},Ee=function integralSourceLists(){(0,Ne.integralSourceListsAction)(jt).then(function(t){Bt||(T||(ft(t.data.sum_data),k(!0)),h?(ct({"lists":[].concat(_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}),b(!1)):ct({"lists":[].concat(_toConsumableArray(lt.lists),_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}))})},Re=function integralExpendLists(){(0,Ne.integralExpendListsAction)(jt).then(function(t){Bt||(T||(ft(t.data.sum_data),k(!0)),h?(ct({"lists":[].concat(_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}),b(!1)):ct({"lists":[].concat(_toConsumableArray(lt.lists),_toConsumableArray(t.data.lists)),"next_page":t.data.next_page,"stime":t.data.stime,"bak":t.data.bak}))})};(0,De.useReachBottom)(function(){if(0!==lt.next_page){var t=J.split("-"),e=void 0;if("0"===I)for(var a=0;a<M.length;a++)M[a].name===ae[et]&&(e=M[a].type);else for(var n=0;n<M.length;n++)M[n].name===re[it]&&(e=M[n].type);var o={"y":t[0],"m":t[1],"stime":lt.stime,"source_type":e,"type":e,"bak":"0","system_type":"","flag":!0};Dt(o)}else zt(!0)}),this.anonymousFunc0=function handleBgMove(t){return t.stopPropagation(),!gt},this.anonymousFunc2=function(t){return Kc(t)},this.anonymousFunc3=function(t){return Kc(t)},this.anonymousFunc4=function(t){return function handleClick(t){b(!0),k(!1);var e=void 0;if("0"===I){at(t.detail.value),j(ae[t.detail.value]);for(var a=0;a<M.length;a++)M[a].name===ae[t.detail.value]&&(e=M[a].type)}else{j(re[t.detail.value]),rt(t.detail.value);for(var n=0;n<M.length;n++)M[n].name===re[t.detail.value]&&(e=M[n].type)}var o=J.split("-"),i={"y":o[0],"m":o[1],"stime":"0","type":e,"source_type":e,"bak":"0","system_type":(0,Be.getSystemInfo)(),"flag":!0};Dt(i)}(t)},this.anonymousFunc6=function(){vt(!1)},this.anonymousFunc7=function(){Le.default.makePhoneCall({"phoneNumber":bt.user_mobile})},this.anonymousFunc8=function(){return function handleComplaint(t){Ct(!0),At(t)}(bt.id)},this.anonymousFunc9=function(){Le.default.makePhoneCall({"phoneNumber":bt.user_mobile})};var Pe=ve.map(function(t,e){t={"privateOriginal":(0,De.internal_get_original)(t)};var a="i"+e,n="ifzzz"+e;return o.anonymousFunc1Map[n]=function(){return function handleJump(t){if(t!=I){k(!1),zt(!1),b(!0);var e=void 0;if("0"==I)for(var a=0;a<M.length;a++)M[a].name===ae[et]&&(e=M[a].type);else for(var n=0;n<M.length;n++)M[n].name===re[it]&&(e=M[n].type);"0"==t?(x(t),Yt({"time":J,"sortType":e,"flag":!0,"listType":it})):"1"==t&&(x(t),qt({"time":J,"sortType":e,"flag":!0,"listType":et}))}}(t.privateOriginal.type)},{"loopState__temp2":a,"_$indexKey":n,"privateOriginal":t.privateOriginal}}),$e=lt.lists.map(function(t,e){t={"privateOriginal":(0,De.internal_get_original)(t)};var a="i"+e,n="igzzz"+e;return o.anonymousFunc5Map[n]=function(){return function handleModal(t,e){(0,Ne.integralUseInfoAction)(t,e).then(function(t){var e=t.errcode,a=t.errmsg,n=t.info,o=t.data;if("deleted"!==t.errcode){if("ok"===e)Se(n.type);else{if("fail"===t.errcode)return;Se(e)}var i=void 0;i=o?o.show_complain:n.show_complain,Ce(i),St(n||o),vt(!0)}else Le.default.showModal({"title":"温馨提示","content":a,"showCancel":!1})})}(t.privateOriginal.id,t.privateOriginal.time)},{"loopState__temp4":a,"_$indexKey2":n,"privateOriginal":t.privateOriginal}});return lt.lists.length||De.propsManager.set({"text":"0"===I?"暂无积分来源记录":"暂无积分消耗记录"},s,u),kt&&De.propsManager.set({"display":kt,"textarea":Et,"handleTextarea":function handleTextarea(t){var e=t.detail.value;Rt(e)},"setComplaintModal":Ct,"handleSubmit":function handleSubmit(){if(!(0,Ke.isVaildVal)(Et,15,500))return(0,Ge.default)("输入内容不少于15个字且必须包含文字"),!1;var t={"content":Et,"type":"job","infoId":xt};(0,Ne.publishComplainAction)(t).then(function(t){"ok"===t.errcode&&(0,Qe.SubscribeToNews)("complain",function(){(0,qe.showModalTip)({"tips":t.errmsg,"callback":function callback(){Ct(!1),vt(!1)}})})})}},y,p),Object.assign(this.__state,{"data":lt,"modalData":bt,"loopArray71":Pe,"loopArray72":$e,"$compid__64":s,"$compid__65":y,"title":$,"tabBar":ve,"initInfo":I,"SERIES":ze.SERIES,"QQSERIES":ze.QQSERIES,"ios":xe,"time":J,"IMGCDNURL":ze.IMGCDNURL,"start":N,"end":K,"sourceList":ae,"consumeList":re,"startType":Xt,"modal":gt,"modelType":be,"showIsReport":ke,"complaintModal":kt,"showTime":W}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(t){t.stopPropagation()}},{"key":"anonymousFunc1","value":function anonymousFunc1(t){for(var e,a=arguments.length,n=Array(1<a?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return this.anonymousFunc1Map[t]&&(e=this.anonymousFunc1Map)[t].apply(e,n)}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(t){for(var e,a=arguments.length,n=Array(1<a?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return this.anonymousFunc5Map[t]&&(e=this.anonymousFunc5Map)[t].apply(e,n)}},{"key":"anonymousFunc6","value":function anonymousFunc6(){}},{"key":"anonymousFunc7","value":function anonymousFunc7(){}},{"key":"anonymousFunc8","value":function anonymousFunc8(){}},{"key":"anonymousFunc9","value":function anonymousFunc9(){}}]),Tabber);function Tabber(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tabber);var t=function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Tabber.__proto__||Object.getPrototypeOf(Tabber)).apply(this,arguments));return t.config={"navigationBarTitleText":""},t.$usedState=["data","modalData","loopArray71","loopArray72","$compid__64","$compid__65","title","tabBar","initInfo","SERIES","QQSERIES","ios","time","IMGCDNURL","start","end","sourceList","consumeList","startType","modal","modelType","showIsReport","complaintModal","showTime"],t.anonymousFunc1Map={},t.anonymousFunc5Map={},t.customComponents=["Auth","Nodata","Report"],t}o.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9"],o.$$componentPath="pages/integral/tabber/index",o.config={"navigationBarTitleText":""},e.default=o,Page(a(0).default.createComponent(o,!0))},"188":function(t,e,a){}},[[187,0,1]]]);