(swan.webpackJsonp=swan.webpackJsonp||[]).push([[47],{"184":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Je=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,a=!1,i=void 0;try{for(var r,u=e[Symbol.iterator]();!(o=(r=u.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ve=n(0),Ke=_interopRequireDefault(Ve),Ye=n(2),Ze=n(1),et=n(3),tt=n(8),nt=n(7),ot=n(4),at=_interopRequireDefault(ot),it=n(16),rt=n(6);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}n(185);var a=(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(DetailInfoPage,Ke.default.Component),o(DetailInfoPage,[{"key":"_constructor","value":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0})(DetailInfoPage.prototype.__proto__||Object.getPrototypeOf(DetailInfoPage.prototype),"_constructor",this).call(this,e),this.$$refs=new Ke.default.RefsArray}},{"key":"_createData","value":function _createData(e,t,n){var a=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var o=this.$prefix,i=(0,Ve.genCompid)(o+"$compid__66"),r=Je(i,2),u=r[0],s=r[1],c=(0,Ve.genCompid)(o+"$compid__67"),l=Je(c,2),f=l[0],d=l[1],p=(0,Ve.genCompid)(o+"$compid__68"),m=Je(p,2),y=m[0],_=m[1],g=(0,Ve.genCompid)(o+"$compid__69"),h=Je(g,2),v=h[0],S=h[1],F=(0,Ve.useRouter)().params,I=F.id,b=void 0===I?"":I,w=F.refId,A=void 0===w?"":w,C=F.type,O=Ke.default.getStorageSync(rt.UserInfo),P=(0,Ve.useState)({"title":"","time":"","image":"","user_name":"","classifyName":[],"detail":"","show_full_address":"","location":"","map_address_name":"","map_street_name":"","tel_str":"","show_ajax_btn":!1,"id":0,"is_collect":0,"view_images":[],"is_end":0,"is_check":0,"has_top":0,"show_complaint":{"show_complaint":0,"tips_message":""},"top_info":{"is_top":""}}),k=Je(P,2),T=k[0],E=k[1],j=(0,Ve.useState)(!1),R=Je(j,2),M=R[0],D=R[1],x=(0,Ve.useState)(""),N=Je(x,2),$=N[0],L=N[1],U=(0,Ve.useState)(!1),B=Je(U,2),W=B[0],H=B[1],G=(0,Ve.useState)(0),Q=Je(G,2),q=Q[0],z=Q[1],X=(0,Ve.useState)(""),J=Je(X,2),V=J[0],K=J[1],Y=(0,Ve.useState)(!1),Z=Je(Y,2),ee=(Z[0],Z[1],(0,Ve.useState)(!1)),te=Je(ee,2),ne=te[0],oe=te[1],ae=(0,Ve.useState)(!1),ie=Je(ae,2),re=(ie[0],ie[1],(0,Ve.useState)("")),ue=Je(re,2),se=ue[0],ce=ue[1],le=(0,Ve.useState)(!1),fe=Je(le,2),de=fe[0],pe=fe[1],me=(0,Ve.useState)(!0),ye=Je(me,2),_e=ye[0],ge=ye[1],he=(0,et.useSelector)(function(e){return e.User.login}),ve=(0,Ve.useState)([]),Se=Je(ve,2),Fe=Se[0],Ie=Se[1],be=(0,Ve.useState)(!1),we=Je(be,2),Ae=we[0],Ce=we[1],Oe=(0,Ve.useState)([]),Pe=Je(Oe,2),ke=Pe[0],Te=Pe[1],Ee=(0,Ve.useState)(0),je=Je(Ee,2),Re=je[0],Me=je[1],De=(0,Ve.useState)(""),xe=Je(De,2),Ne=xe[0],$e=xe[1],Le=(0,Ve.useState)(0),Ue=Je(Le,2),Be=Ue[0],We=Ue[1];function ac(e){Ke.default.navigateTo({"url":e})}function dc(){return he||(Ke.default.navigateTo({"url":Ze.CODEAUTHPATH}),0)}(0,Ve.useDidShow)(function(){Ce((0,tt.isIos)()),W?H(!1):He()});var He=function getRecruitInfo(){var e={"type":"job","infoId":b};(he?Ye.jobInfoAction:Ye.jobNoUserInfoAction)(e).then(function(u){Ge(u,function(){if(H(!1),E(u.result),ce(u.result.tel_str),ge(u.result.show_ajax_btn),Ke.default.setNavigationBarTitle({"title":u.result.title}),Ze.SERIES==Ze.BAIDUSERIES){var e=u.result.classifyName[0],t=e.split("/").map(function(e){return"招"+e+"师傅"}).join(",");Ke.default.setPageInfo({"title":u.result.title,"description":u.result.title+u.result.detail,"keywords":u.result.show_full_address+"招"+e+"师傅,"+t+",工地招工,找工人,建筑工地"})}z(u.result.is_collect);var n=u.result.city_id&&0!=u.result.city_id?u.result.city_id:u.result.province_id;Me(n);var o=u.result.occupations.length?u.result.occupations.join(","):"";$e(o);var a=u.result.id;if(We(a),O.userId===u.result.user_id?K("own"):K(u.errcode),O.userId===u.result.user_id){var i={"page":1,"type":1,"area_id":u.result.city_id,"occupations":[].concat(_toConsumableArray(u.result.occupations)).join(","),"uuid":""};(0,Ye.detailsRecommendAction)(i).then(function(e){"ok"===e.errcode?Te(e.data.list):(0,at.default)(e.errmsg)})}else{var r={"page":1,"type":1,"area_id":u.result.city_id,"job_ids":u.result.id,"classify_id":[].concat(_toConsumableArray(u.result.occupations)).join(",")};(0,Ye.jobRecommendListAction)(r).then(function(e){"ok"===e.errcode?Ie(e.data.list):(0,at.default)(e.errmsg)})}})}).catch(function(){(0,ot.ShowActionModal)({"msg":"网络异常，请重新进入","success":function success(){Ke.default.navigateBack()}})})},Ge=function detailGetTelAction(e,t){if("ok"==e.errcode||"end"==e.errcode||"ajax"==e.errcode)t&&t();else if("end"==e.errcode)(0,at.default)(e.errmsg);else if("auth_not_pass"==e.errcode||"to_auth"==e.errcode)Ke.default.showModal({"title":"温馨提示","content":e.errmsg,"success":function success(e){e.confirm?Ke.default.navigateTo({"url":"/pages/realname/index"}):Ke.default.navigateBack()}});else if("none_tel"==e.errcode)Ke.default.showModal({"title":"温馨提示","content":e.errmsg,"cancelText":"返回列表","confirmText":"绑定手机","success":function success(e){e.confirm?Ke.default.navigateTo({"url":"/pages/userinfo/add/index"}):e.cancel&&Ke.default.navigateBack()}});else if("get_integral"==e.errcode)Ke.default.showModal({"title":"温馨提示","content":e.errmsg,"cancelText":"返回列表","confirmText":"获取积分","success":function success(e){e.confirm?Ke.default.navigateTo({"url":"/pages/getintegral/index"}):e.cancel&&Ke.default.navigateBack()}});else if("reload"==e.errcode)Ke.default.showModal({"title":"温馨提示","content":e.errmsg,"showCancel":!1,"confirmText":"确定","success":function success(e){e.confirm&&He()}});else if("goback"==e.errcode){var n=Ke.default.getCurrentPages();Ke.default.showModal({"title":"温馨提示","content":e.errmsg,"confirmText":"确定","showCancel":!1,"success":function success(e){e.confirm&&(1<n.length?Ke.default.navigateBack():Ke.default.reLaunch({"url":"/pages/index/index"}))}})}else Ke.default.showModal({"title":"温馨提示","content":e.errmsg,"showCancel":!1,"confirmText":"我知道了","success":function success(){Ke.default.navigateBack()}})};function fc(){if(dc()){var e={"type":"job","infoId":T.id};(0,Ye.jobGetTelAction)(e).then(function(e){Ge(e,function(){H(!0),ce(e.tel),pe(!0),ge(!1)})})}}function gc(){"end"===V?Ke.default.showModal({"title":"温馨提示","content":"该招工信息已招到，暂时不能投诉","showCancel":!1}):ne?Ke.default.showModal({"title":"提示","content":"您已投诉该信息，请勿重复操作！","showCancel":!1}):de?D(!0):T.show_ajax_btn?(0,at.default)("请查看完整的手机号码后再操作！"):2!==T.is_end&&T.show_complaint.show_complaint?D(!0):Ke.default.showModal({"title":"提示","content":"您已投诉该信息，请勿重复投诉！","showCancel":!1})}(0,Ve.useEffect)(function(){A&&Ke.default.setStorageSync(rt.REFID,A)},[A]),(0,Ve.useShareAppMessage)(function(){var e="/pages/detail/info/index?id="+b,t=Ke.default.getStorageSync(rt.UserInfo);return Xe({},(0,nt.getUserShareMessage)(),{"path":t?e+"&refId="+t.userId:e})}),this.anonymousFunc0=function(){return fc()},this.anonymousFunc1=function(){Ke.default.makePhoneCall({"phoneNumber":se})},this.anonymousFunc2=gc,this.anonymousFunc3=function(){return ac("/subpackage/pages/anti-fraud/index")},this.anonymousFunc4=function(){return ac("/pages/static/notice/index?id=32")};var Qe=Ze.REPLACEWEIXINTEXT?T.detail.replace(Ze.FILTERWEIXINREG,""):T.detail;this.anonymousFunc6=function handleMap(){var e=T.location.split(",");H(!0),Ke.default.openLocation({"latitude":parseFloat(e[1]),"longitude":parseFloat(e[0]),"name":T.map_address_name,"address":T.map_street_name,"scale":18})},this.anonymousFunc7=function(){return ac(Ze.DOWNLOADAPPPATH)},this.anonymousFunc8=function collection(){dc()&&(0,Ye.recruitListCancelCollectionAction)(T.id.toString()).then(function(e){(0,at.default)(e.errmsg),"add"===e.action?z(1):z(0)})},this.anonymousFunc9=gc,this.anonymousFunc10=function(){return fc()},this.anonymousFunc11=function(){Ke.default.makePhoneCall({"phoneNumber":se})};var qe=T.classifyName.map(function(e,t){return{"loopState__temp2":t+t,"privateOriginal":(e={"privateOriginal":(0,Ve.internal_get_original)(e)}).privateOriginal}}),ze=T.view_images.length?T.view_images.map(function(e,t){e={"privateOriginal":(0,Ve.internal_get_original)(e)};var n=T.view_images.length?t+t:null,o="ifzzz"+t;return a.anonymousFunc5Map[o]=function(){return function handleImage(e){H(!0),Ke.default.previewImage({"current":e,"urls":[e]})}(e.privateOriginal)},{"loopState__temp5":n,"_$indexKey":o,"privateOriginal":e.privateOriginal}}):[];return Ve.propsManager.set({"type":1},s,u),"own"===V&&ke.length&&Ve.propsManager.set({"data":ke,"type":2,"areasId":Re,"occupations":Ne,"jobIds":Be,"detailList":!0},d,f),"own"!==V&&Fe.length&&Ve.propsManager.set({"data":Fe,"type":1,"areasId":Re,"occupations":Ne,"jobIds":Be,"detailList":!0},_,y),M&&Ve.propsManager.set({"display":M,"textarea":$,"handleTextarea":function handleTextarea(e){var t=e.detail.value;L(t)},"setComplaintModal":D,"handleSubmit":function handleSubmit(){if(!(0,tt.isVaildVal)($,5,500))return(0,ot.ShowActionModal)({"msg":"输入内容不少于5个字且必须包含文字"}),!1;var e={"content":$,"type":"job","infoId":T.id};(0,Ye.publishComplainAction)(e).then(function(e){"ok"===e.errcode&&(0,it.SubscribeToNews)("complain",function(){(0,ot.showModalTip)({"tips":e.errmsg,"callback":function callback(){D(!1),oe(!0)}})})})}},S,v),Object.assign(this.__state,{"anonymousState__temp3":Qe,"data":T,"loopArray74":qe,"loopArray75":ze,"$compid__66":s,"$compid__67":d,"$compid__68":_,"$compid__69":S,"type":C,"resCode":V,"editPhone":_e,"SHOWOFFICIALACCOUNT":Ze.SHOWOFFICIALACCOUNT,"SERIES":Ze.SERIES,"QQSERIES":Ze.QQSERIES,"ios":Ae,"DOWNLOADAPP":Ze.DOWNLOADAPP,"IMGCDNURL":Ze.IMGCDNURL,"isCollection":q,"ISCANSHARE":Ze.ISCANSHARE,"recommendRe":ke,"recommend":Fe,"complaintModal":M,"phone":se}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(e){for(var t,n=arguments.length,o=Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return this.anonymousFunc5Map[e]&&(t=this.anonymousFunc5Map)[e].apply(t,o)}},{"key":"anonymousFunc6","value":function anonymousFunc6(){}},{"key":"anonymousFunc7","value":function anonymousFunc7(){}},{"key":"anonymousFunc8","value":function anonymousFunc8(){}},{"key":"anonymousFunc9","value":function anonymousFunc9(){}},{"key":"anonymousFunc10","value":function anonymousFunc10(){}},{"key":"anonymousFunc11","value":function anonymousFunc11(){}}]),DetailInfoPage);function DetailInfoPage(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DetailInfoPage);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(DetailInfoPage.__proto__||Object.getPrototypeOf(DetailInfoPage)).apply(this,arguments));return e.config={"navigationBarTitleText":""},e.$usedState=["anonymousState__temp3","data","loopArray74","loopArray75","$compid__66","$compid__67","$compid__68","$compid__69","type","resCode","editPhone","SHOWOFFICIALACCOUNT","SERIES","QQSERIES","ios","DOWNLOADAPP","IMGCDNURL","isCollection","ISCANSHARE","recommendRe","recommend","complaintModal","phone"],e.anonymousFunc5Map={},e.customComponents=["WechatNotice","CollectionRecruitList","Report"],e}a.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9","anonymousFunc10","anonymousFunc11"],a.$$componentPath="pages/detail/info/index",a.config={"navigationBarTitleText":""},t.default=a,Page(n(0).default.createComponent(a,!0))},"185":function(e,t,n){}},[[184,0,1]]]);