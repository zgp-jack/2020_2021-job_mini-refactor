(swan.webpackJsonp=swan.webpackJsonp||[]).push([[40],{"136":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var hn=function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function sliceIterator(n,e){var t=[],o=!0,a=!1,u=void 0;try{for(var i,r=n[Symbol.iterator]();!(o=(i=r.next()).done)&&(t.push(i.value),!e||t.length!==e);o=!0);}catch(n){a=!0,u=n}finally{try{!o&&r.return&&r.return()}finally{if(a)throw u}}return t}(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(n,e,t){return e&&defineProperties(n.prototype,e),t&&defineProperties(n,t),n};function defineProperties(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var gn=t(0),vn=_interopRequireDefault(gn),bn=t(1),Fn=t(2),wn=t(4),kn=t(5),xn=t(3),Sn=_interopRequireDefault(xn),Pn=t(10),jn=t(7);function _interopRequireDefault(n){return n&&n.__esModule?n:{"default":n}}t(137);var a=(function _inherits(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{"constructor":{"value":n,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(DetailInfoPage,vn.default.Component),o(DetailInfoPage,[{"key":"_constructor","value":function _constructor(n){(function get(n,e,t){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var a=Object.getPrototypeOf(n);return null===a?void 0:get(a,e,t)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(t):void 0})(DetailInfoPage.prototype.__proto__||Object.getPrototypeOf(DetailInfoPage.prototype),"_constructor",this).call(this,n),this.$$refs=new vn.default.RefsArray}},{"key":"_createData","value":function _createData(n,e,t){var a=this;this.__state=n||this.state||{},this.__props=e||this.props||{};var o=this.$prefix,u=(0,gn.genCompid)(o+"$compid__53"),i=hn(u,2),r=i[0],s=i[1],c=(0,gn.genCompid)(o+"$compid__54"),l=hn(c,2),f=l[0],p=l[1],m=(0,gn.useRouter)().params.id,d=vn.default.getStorageSync(jn.UserInfo),y=(0,gn.useState)({"title":"","time":"","image":"","user_name":"","classifyName":[],"detail":"","show_full_address":"","location":"","map_address_name":"","map_street_name":"","tel_str":"","show_ajax_btn":!1,"id":0,"is_collect":0,"view_images":[],"is_end":0,"is_check":0,"has_top":0,"show_complaint":{"show_complaint":0,"tips_message":""},"top_info":{"is_top":""}}),_=hn(y,2),h=_[0],g=_[1],v=(0,gn.useState)(!1),b=hn(v,2),F=b[0],w=b[1],k=(0,gn.useState)(""),x=hn(k,2),S=x[0],P=x[1],j=(0,gn.useState)(!1),C=hn(j,2),I=C[0],O=C[1],T=(0,gn.useState)(0),D=hn(T,2),M=D[0],A=D[1],R=(0,gn.useState)(""),$=hn(R,2),N=$[0],E=$[1],L=(0,gn.useState)(!1),U=hn(L,2),q=U[0],B=U[1],G=(0,gn.useState)(!1),z=hn(G,2),H=z[0],V=z[1],J=(0,gn.useState)(!1),K=hn(J,2),W=K[0],Q=(K[1],(0,gn.useState)("")),X=hn(Q,2),Y=X[0],Z=X[1],nn=(0,gn.useState)(!1),en=hn(nn,2),tn=en[0],on=en[1],an=(0,gn.useState)(!0),un=hn(an,2),rn=un[0],sn=un[1],cn=(0,wn.useSelector)(function(n){return n.User.login}),ln=(0,gn.useState)([]),fn=hn(ln,2),pn=fn[0],mn=fn[1];function mb(n){vn.default.navigateTo({"url":n})}function pb(){var n={"type":"job","infoId":h.id};(0,bn.jobGetTelAction)(n).then(function(n){"ok"===n.errcode&&(O(!0),Z(n.tel),on(!0),sn(!1))})}function qb(){"end"===N?vn.default.showModal({"title":"温馨提示","content":"该招工信息已招到，暂时不能投诉","showCancel":!1}):H?vn.default.showModal({"title":"提示","content":"您已投诉该信息，请勿重复操作！","showCancel":!1}):tn?w(!0):h.show_ajax_btn?(0,Sn.default)("请查看完整的手机号码后再操作！"):2!==h.is_end&&h.show_complaint.show_complaint?w(!0):vn.default.showModal({"title":"提示","content":"您已投诉该信息，请勿重复投诉！","showCancel":!1})}function tb(){(0,bn.jobEndStatusAction)(h.id).then(function(n){"ok"===n.errcode?(console.log(q),console.log(h.is_end,"xxx"),(0,Sn.default)(n.errmsg),B(!1),O(!0)):(0,Sn.default)(n.errmsg)})}(0,gn.useDidShow)(function(){I?O(!1):(console.log(1111),dn())});var dn=function getRecruitInfo(){var n={"type":"job","infoId":m};cn?(0,bn.jobInfoAction)(n).then(function(n){var e={"page":1,"type":1,"area_id":n.result.city_id,"job_ids":n.result.id,"classify_id":[n.result.occupations].join(",")};(0,bn.jobRecommendListAction)(e).then(function(n){console.log(n,"xxxxx"),mn(n.data.list)}),O(!1),g(n.result),Z(n.result.tel_str),sn(n.result.show_ajax_btn),vn.default.setNavigationBarTitle({"title":n.result.title}),A(n.result.is_collect),d.userId===n.result.user_id?E("own"):E(n.errcode)}):(0,bn.jobNoUserInfoAction)(n).then(function(n){O(!1),g(n.result),Z(n.result.tel_str),sn(n.result.show_ajax_btn),vn.default.setNavigationBarTitle({"title":n.result.title}),A(n.result.is_collect),d.userId===n.result.user_id?E("own"):E(n.errcode)})};this.anonymousFunc0=function(){return pb()},this.anonymousFunc1=function(){vn.default.makePhoneCall({"phoneNumber":Y})},this.anonymousFunc2=qb,this.anonymousFunc3=function(){return mb("/subpackage/pages/anti-fraud/index")},this.anonymousFunc4=function(){return mb("/subpackage/pages/notice/index?id=32")},this.anonymousFunc6=function handleMap(){var n=h.location.split(",");O(!0),vn.default.openLocation({"latitude":parseFloat(n[1]),"longitude":parseFloat(n[0]),"name":h.map_address_name,"address":h.map_street_name,"scale":18})},this.anonymousFunc7=function(){return mb("/subpackage/pages/download/index")},this.anonymousFunc8=tb,this.anonymousFunc9=function(){return mb("/pages/topping/index?id="+h.id+"&type=1")},this.anonymousFunc10=tb,this.anonymousFunc11=function(){return function handleTopping(n){if(n.has_top){var e=parseInt(n.top_info.end_time);if((new Date).getTime()/1e3<e){vn.default.showLoading({"title":"正在执行操作"});var t={"infoId":m,"status":"0"==n.toping?"1":"0"};return(0,bn.jobUpdateTopStatusAction)(t).then(function(n){if("ok"===n.errcode)console.log(n),(0,Sn.default)(n.errmsg),O(!0),B(!0);else{if("auth_forbid"===n.errcode)return void vn.default.showModal({"title":"温馨提示","content":n.errmsg,"cancelText":"取消","confirmText":"去实名","success":function success(n){n.confirm&&vn.default.navigateTo({"url":"/pages/realname/index?backtwo=backtwo"})}});if("member_forbid"==n.errcode)return void vn.default.showModal({"title":"温馨提示","content":"mydata.errmsg","cancelText":"取消","confirmText":"联系客服","success":function success(n){if(n.confirm){var e=Fn.SERVERPHONE;vn.default.makePhoneCall({"phoneNumber":e})}}});vn.default.showToast({"title":n.errmsg,"icon":"none","duration":1500})}}),!1}}mb("/pages/topping/index?id="+n.id)}(h)},this.anonymousFunc12=function collection(){(0,bn.recruitListCancelCollectionAction)(h.id.toString()).then(function(n){(0,Sn.default)(n.errmsg),"add"===n.action?A(1):A(0)})},this.anonymousFunc13=qb,this.anonymousFunc14=function(){return pb()},this.anonymousFunc15=function(){vn.default.makePhoneCall({"phoneNumber":h.tel_str})};var yn=h.classifyName.map(function(n,e){return{"loopState__temp2":e+e,"privateOriginal":(n={"privateOriginal":(0,gn.internal_get_original)(n)}).privateOriginal}}),_n=h.view_images.length?h.view_images.map(function(n,e){n={"privateOriginal":(0,gn.internal_get_original)(n)};var t=h.view_images.length?e+e:null,o="fizzz"+e;return a.anonymousFunc5Map[o]=function(){return function handleImage(n){O(!0),vn.default.previewImage({"current":n,"urls":[n]})}(n.privateOriginal)},{"loopState__temp4":t,"_$indexKey":o,"privateOriginal":n.privateOriginal}}):[];return pn.length&&gn.propsManager.set({"data":pn,"type":1},s,r),F&&gn.propsManager.set({"display":F,"textarea":S,"handleTextarea":function handleTextarea(n){var e=n.detail.value;P(e)},"setComplaintModal":w,"handleSubmit":function handleSubmit(){if(!(0,kn.isVaildVal)(S,15,500))return(0,Sn.default)("输入内容不少于15个字且必须包含文字"),!1;var n={"content":S,"type":"job","infoId":h.id};(0,bn.publishComplainAction)(n).then(function(n){"ok"===n.errcode&&(0,Pn.SubscribeToNews)("complain",function(){(0,xn.SubPopup)({"tips":n.errmsg,"callback":function callback(){w(!1),V(!0)}})})})}},p,f),Object.assign(this.__state,{"data":h,"loopArray52":yn,"loopArray53":_n,"$compid__53":s,"$compid__54":p,"resCode":N,"editPhone":rn,"IMGCDNURL":Fn.IMGCDNURL,"again":W,"stopHiring":q,"isCollection":M,"recommend":pn,"complaintModal":F,"phone":Y}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(n){for(var e,t=arguments.length,o=Array(1<t?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return this.anonymousFunc5Map[n]&&(e=this.anonymousFunc5Map)[n].apply(e,o)}},{"key":"anonymousFunc6","value":function anonymousFunc6(){}},{"key":"anonymousFunc7","value":function anonymousFunc7(){}},{"key":"anonymousFunc8","value":function anonymousFunc8(){}},{"key":"anonymousFunc9","value":function anonymousFunc9(){}},{"key":"anonymousFunc10","value":function anonymousFunc10(){}},{"key":"anonymousFunc11","value":function anonymousFunc11(){}},{"key":"anonymousFunc12","value":function anonymousFunc12(){}},{"key":"anonymousFunc13","value":function anonymousFunc13(){}},{"key":"anonymousFunc14","value":function anonymousFunc14(){}},{"key":"anonymousFunc15","value":function anonymousFunc15(){}}]),DetailInfoPage);function DetailInfoPage(){!function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,DetailInfoPage);var n=function _possibleConstructorReturn(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}(this,(DetailInfoPage.__proto__||Object.getPrototypeOf(DetailInfoPage)).apply(this,arguments));return n.config={"navigationBarTitleText":""},n.$usedState=["data","loopArray52","loopArray53","$compid__53","$compid__54","resCode","editPhone","IMGCDNURL","again","stopHiring","isCollection","recommend","complaintModal","phone"],n.anonymousFunc5Map={},n.customComponents=["WechatNotice","CollectionRecruitList","Report"],n}a.$$events=["anonymousFunc0","anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9","anonymousFunc10","anonymousFunc11","anonymousFunc12","anonymousFunc13","anonymousFunc14","anonymousFunc15"],a.$$componentPath="pages/detail/info/index",a.config={"navigationBarTitleText":""},e.default=a,Page(t(0).default.createComponent(a,!0))},"137":function(n,e,t){}},[[136,0,1]]]);