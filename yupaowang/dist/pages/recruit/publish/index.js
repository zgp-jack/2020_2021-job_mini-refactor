(swan.webpackJsonp=swan.webpackJsonp||[]).push([[70],{"131":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{"value":!0});var J=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},U=function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,n){var t=[],o=!0,a=!1,i=void 0;try{for(var r,u=e[Symbol.iterator]();!(o=(r=u.next()).done)&&(t.push(r.value),!n||t.length!==n);o=!0);}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e};function defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var $=t(0),B=_interopRequireDefault($),X=_interopRequireDefault(t(13)),G=t(1),V=_interopRequireDefault(t(132)),q=_interopRequireDefault(t(15)),L=_interopRequireDefault(t(4)),H=_interopRequireDefault(t(5));t(133);var z=t(3);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var a=(function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(PublishRecruit,B.default.Component),o(PublishRecruit,[{"key":"_constructor","value":function _constructor(e){(function get(e,n,t){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,n,t)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(t):void 0})(PublishRecruit.prototype.__proto__||Object.getPrototypeOf(PublishRecruit.prototype),"_constructor",this).call(this,e),this.$$refs=new B.default.RefsArray}},{"key":"_createData","value":function _createData(e,n,t){function Xa(e,n){var t=e.detail.value,o=JSON.parse(JSON.stringify(_));o[n]=t,p(J({},o))}this.__state=e||this.state||{},this.__props=n||this.props||{};var o=this.$prefix,a=(0,$.genCompid)(o+"$compid__43"),i=U(a,2),r=i[0],u=i[1],s=(0,$.genCompid)(o+"$compid__44"),c=U(s,2),l=c[0],f=c[1],d=(0,$.useRouter)().params.id||"",m={"type":"job","infoId":d},y=(0,z.useSelector)(function(e){return e.MyAreaInfo}),h=(0,V.default)(m),_=h.model,p=h.setModel,v=h.showUpload,g=h.setShowUpload,A=h.showProfession,b=h.setShowProssion,P=h.userPublishRecruitAction,S=h.num,w=h.setNum,k=h.phone,I=h.areaIndex,F=h.areaPickerData,C=h.areaCityPicker,O=h.areaProvincePicker,x=h.setAreaPickerData,R=h.setAreaIndex,M=h.areaPickerName,N=h.setAreaPickerName,T=(0,X.default)(),E=T.text,D=T.userGetCode;this.anonymousFunc0=function(e,n,t){return function userClickProfession(e,n,t){if(_){var o=JSON.parse(JSON.stringify(_.classifyTree)),a=o[e].children[n].is_check;if(!a){var i=_.maxClassifyCount;if(i<=_.classifies.length)return void(0,L.default)("工种最多可以选择"+i+"个")}o[e].children[n].is_check=!a;var r=JSON.parse(JSON.stringify(_.classifies)),u=a?r.filter(function(e){return e!==t}):[].concat(_toConsumableArray(r),[t]);p(J({},_,{"classifyTree":o,"classifies":u}))}}(e,n,t)},this.anonymousFunc1=function(e){return Xa(e,"title")},this.anonymousFunc2=function(){return function showProfessionAction(){b(!0)}()},this.anonymousFunc3=function(){return function userChooseArea(){if(_){var e="/pages/map/recruit/index?id="+d;B.default.navigateTo({"url":e})}}()},this.anonymousFunc4=function(e){return function userChangePickerArea(e){var n=O[e.detail.value[0]].id,t=F[1][e.detail.value[1]].id;_&&p(J({},_,{"province_id":+n,"city_id":+t}));var o=n===t?O[e.detail.value[0]].name:O[e.detail.value[0]].name+"-"+F[1][e.detail.value[1]].name;N(o)}(e)},this.anonymousFunc5=function(e){return function userChangeColumn(e){var n=e.detail.column,t=e.detail.value;if(0===n){var o=JSON.parse(JSON.stringify(F));o[1]=C[t],x(o),R([t,0])}else R([I[0],t])}(e)},this.anonymousFunc6=function(e){return Xa(e,"user_name")},this.anonymousFunc7=function(e){return Xa(e,"user_mobile")},this.anonymousFunc8=function(e){return Xa(e,"code")},this.anonymousFunc9=function(){return D(_.user_mobile)};var j=A?null:(0,H.default)({"publish-textarea":!0,"hide":A});return this.anonymousFunc10=function(e){return Xa(e,"detail"),w(e.detail.value.length),!1},this.anonymousFunc11=function(){return function changeShowUpload(){g(!v)}()},this.anonymousFunc12=function(){return P()},A&&$.propsManager.set({"closeProfession":function closeProfession(){b(!1)},"data":_&&_.classifyTree,"onClickItem":this.anonymousFunc0,"num":3},u,r),v&&_&&$.propsManager.set({"images":_.view_images,"max":_.maxImageCount,"userUploadImg":function userUploadImg(e){var t=0<arguments.length&&void 0!==e?e:-1;(0,q.default)().then(function(e){var n={"url":e.url,"httpurl":e.httpurl};_&&(-1===t?p(J({},_,{"view_images":[].concat(_toConsumableArray(_.view_images),[n])})):(_.view_images[t]=n,p(J({},_))))})},"userDelImg":function userDelImg(e){if(_){var n=JSON.parse(JSON.stringify(_));n.view_images.splice(e,1),p(n)}}},f,l),Object.assign(this.__state,{"anonymousState__temp":j,"model":_,"$compid__43":u,"$compid__44":f,"showProfession":A,"USEGAODEMAPAPI":G.USEGAODEMAPAPI,"areaInfo":y,"areaIndex":I,"areaPickerData":F,"areaPickerName":M,"phone":k,"showUpload":v,"text":E,"num":S,"TEXTAREAMAXLENGTH":G.TEXTAREAMAXLENGTH}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(){}},{"key":"anonymousFunc6","value":function anonymousFunc6(){}},{"key":"anonymousFunc7","value":function anonymousFunc7(){}},{"key":"anonymousFunc8","value":function anonymousFunc8(){}},{"key":"anonymousFunc9","value":function anonymousFunc9(){}},{"key":"anonymousFunc10","value":function anonymousFunc10(){}},{"key":"anonymousFunc11","value":function anonymousFunc11(){}},{"key":"anonymousFunc12","value":function anonymousFunc12(){}}]),PublishRecruit);function PublishRecruit(){!function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,PublishRecruit);var e=function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(PublishRecruit.__proto__||Object.getPrototypeOf(PublishRecruit)).apply(this,arguments));return e.config={"navigationBarTitleText":"发布招工","navigationBarBackgroundColor":"#0099ff","navigationBarTextStyle":"white","backgroundTextStyle":"dark"},e.$usedState=["anonymousState__temp","model","$compid__43","$compid__44","showProfession","USEGAODEMAPAPI","areaInfo","areaIndex","areaPickerData","areaPickerName","phone","showUpload","text","num","TEXTAREAMAXLENGTH"],e.customComponents=["Auth","Profession","ImageView"],e}a.$$events=["anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9","anonymousFunc10","anonymousFunc11","anonymousFunc12"],a.$$componentPath="pages/recruit/publish/index",a.config={"navigationBarTitleText":"发布招工","navigationBarBackgroundColor":"#0099ff","navigationBarTextStyle":"white","backgroundTextStyle":"dark"},n.default=a,Page(t(0).default.createComponent(a,!0))},"132":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{"value":!0});var K=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Q=function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,n){var t=[],o=!0,a=!1,i=void 0;try{for(var r,u=e[Symbol.iterator]();!(o=(r=u.next()).done)&&(t.push(r.value),!n||t.length!==n);o=!0);}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")};n.default=function usePublishViewInfo(d){var e=(0,re.useSelector)(function(e){return e.User.login}),n=(0,W.useState)({"title":"","detail":""}),t=Q(n,2),a=t[0],o=t[1],i=(0,W.useState)(!1),r=Q(i,2),u=r[0],s=r[1],c=(0,W.useState)(!1),l=Q(c,2),f=l[0],m=l[1],y=(0,W.useState)(0),h=Q(y,2),_=h[0],p=h[1],v=(0,W.useState)(""),g=Q(v,2),A=g[0],b=g[1],P=(0,W.useState)({}),S=Q(P,2),w=S[0],k=S[1],I=(0,W.useState)([0,0]),F=Q(I,2),C=F[0],O=F[1],x=(0,W.useState)([]),R=Q(x,2),M=R[0],N=R[1],T=(0,W.useState)([]),E=Q(T,2),D=E[0],j=E[1],J=(0,W.useState)([]),U=Q(J,2),$=U[0],B=U[1],X=(0,W.useState)(""),G=Q(X,2),V=G[0],q=G[1],L=(0,re.useSelector)(function(e){return e.MyAreaInfo}),H=(0,re.useDispatch)();(0,W.useEffect)(function(){e&&(0,Z.getPublishRecruitView)(d).then(function(e){if("ok"==e.errcode){var n={"placeholder":e.placeholder,"classifies":e.selectedClassifies,"maxImageCount":e.typeTextArr.maxImageCount,"maxClassifyCount":e.typeTextArr.maxClassifyCount,"classifyTree":e.classifyTree,"title":e.model.title||"","address":e.model.address||e.show_address,"detail":e.model.detail||"","infoId":e.model.id||d.infoId,"type":e.type,"user_mobile":e.model.user_mobile||e.memberInfo.tel||"","code":"","user_name":e.model.user_name,"view_images":e.view_image,"province_id":e.model.province_id||"","city_id":e.model.city_id||"","location":e.model.location||"","adcode":"","county_id":e.model.county_id||"","is_check":e.model.hasOwnProperty("is_check")?e.model.is_check:1,"check_fail_msg":e.model.check_fail_msg||""};if(o(n),function initUserAreaInfo(e){if(d.infoId){var n=(0,te.getCityInfoById)(e.default_search_name.id);H((0,se.setArea)({"name":n.name,"ad_name":n.ad_name}))}else{var t=Y.default.getStorageSync(ee.UserLocationCity);if(t){var o=(0,te.getCityInfo)(t,1);H((0,se.setArea)({"name":o.name,"ad_name":o.ad_name}))}else(0,oe.userAuthLoction)().then(function(e){var n=(0,te.getCityInfo)(e,1);H((0,se.setArea)({"name":n.name,"ad_name":n.ad_name}))}).catch(function(){H((0,se.setArea)({"name":te.AREABEIJING.name,"ad_name":te.AREABEIJING.ad_name}))})}if(d.infoId)H((0,se.setAreaInfo)({"title":e.model.address,"location":e.model.location,"info":"","adcode":e.model.adcode||""}));else{var a=Y.default.getStorageSync(ee.UserLastPublishArea);a&&H((0,se.setAreaInfo)(a))}}(e),0==n.is_check&&function bakModelInfo(e){var n={"title":e.title,"address":e.address,"detail":e.detail,"infoId":e.infoId,"type":e.type,"user_mobile":e.user_mobile,"code":e.code,"user_name":e.user_name,"province_id":e.province_id,"city_id":e.city_id,"location":e.location,"adcode":"","county_id":e.county_id,"classifies":e.classifies,"images":e.view_images.map(function(e){return e.url})};k(n),(0,ae.ShowActionModal)({"title":"审核失败","msg":e.check_fail_msg})}(n),H((0,se.setAreaInfo)(K({},L,{"title":n.address}))),b(n.user_mobile),e.view_image.length&&s(!0),n.detail&&p(n.detail.length),ne.USEGAODEMAPAPI)return;z(n.province_id,n.city_id)}else(0,ae.ShowActionModal)({"msg":e.errmsg,"success":function success(){Y.default.navigateBack()}})})},[e]);var z=function initChoosePickerArea(e,n){var t=(0,te.getCityAreaPicker)(),o=t.province,a=t.cities;if(N([].concat(_toConsumableArray(o))),j([].concat(_toConsumableArray(a))),d.infoId){var i=(0,te.getAreaCurrentArr)(e,n),r=i.pi,u=i.ci,s=JSON.parse(JSON.stringify(a[r]));B([[].concat(_toConsumableArray(o)),[].concat(_toConsumableArray(s))]),O([r,u]);var c=o[r].name,l=a[r][u].name,f=o[r].id===a[r][u].id?c:c+"-"+l;q(f)}else B([[].concat(_toConsumableArray(o)),[].concat(_toConsumableArray(a[0]))])};return{"model":a,"setModel":o,"showUpload":u,"setShowUpload":s,"showProfession":f,"setShowProssion":m,"userPublishRecruitAction":function userPublishRecruitAction(){var e=function getPublishedInfo(){if(a){var e={"title":a.title,"address":L.title,"detail":a.detail,"infoId":a.infoId,"type":a.type,"user_mobile":a.user_mobile,"code":a.code,"user_name":a.user_name,"province_id":a.province_id,"city_id":a.city_id,"location":a.location,"adcode":L.adcode,"county_id":a.county_id,"classifies":a.classifies,"images":a.view_images.map(function(e){return e.url})},n=JSON.parse(JSON.stringify(e)),t=n.images.join(","),o=n.classifies.join(",");return n=K({},n,{"images":t,"classifies":o,"location":L.location})}}();if(e)if((0,ue.isVaildVal)(e.title,3))if(e.classifies.length)if(e.province_id||e.address)if((0,ue.isVaildVal)(e.user_name,2))if((0,ue.isPhone)(e.user_mobile))if(A==e.user_mobile||e.code)if((0,ue.isVaildVal)(e.detail,15)){if(a&&0==a.is_check)if(JSON.stringify(w)==JSON.stringify(e))return void(0,ae.ShowActionModal)({"title":"审核失败","msg":a&&a.check_fail_msg});e.address+="@@@@@"+L.info,(0,Z.publishRecruitInfo)(e).then(function(e){"ok"==e.errcode?(0,ie.SubscribeToNews)("recruit",function(){(0,ae.ShowActionModal)({"msg":e.errmsg,"success":function success(){Y.default.reLaunch({"url":"/pages/published/recruit/index"})}})}):(0,ae.ShowActionModal)({"msg":e.errmsg})})}else(0,ae.ShowActionModal)({"msg":"请正确输入15~500字招工详情!"});else(0,ae.ShowActionModal)({"msg":"请输入正确的验证码!"});else(0,ae.ShowActionModal)({"msg":"手机号输入有误!"});else(0,ae.ShowActionModal)({"msg":"请正确输入2~6字中文姓名!"});else(0,ae.ShowActionModal)({"msg":"请选择您的详细地址!"});else(0,ae.ShowActionModal)({"msg":"请选择您的工种!"});else(0,ae.ShowActionModal)({"msg":"请正确输入3~12字中文标题!"})},"num":_,"setNum":p,"phone":A,"areaIndex":C,"setAreaIndex":O,"areaProvincePicker":M,"areaCityPicker":D,"areaPickerData":$,"setAreaPickerData":B,"areaPickerName":V,"setAreaPickerName":q}};var W=t(0),Y=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(W),Z=t(2),ee=t(6),ne=t(1),te=t(9),oe=t(7),ae=t(4),ie=t(16),re=t(3),ue=t(8),se=t(17);function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}},"133":function(e,n,t){}},[[131,0,1]]]);