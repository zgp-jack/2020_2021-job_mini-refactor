(swan.webpackJsonp=swan.webpackJsonp||[]).push([[67],{"152":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var Jn=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Mn=function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function sliceIterator(n,e){var t=[],o=!0,a=!1,u=void 0;try{for(var i,s=n[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!e||t.length!==e);o=!0);}catch(n){a=!0,u=n}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}return t}(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(n,e,t){return e&&defineProperties(n.prototype,e),t&&defineProperties(n,t),n};function defineProperties(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var $n=t(0),Tn=_interopRequireDefault($n),Ln=t(1),Dn=t(3),Rn=_interopRequireDefault(Dn),En=t(9),qn=t(89),Vn=t(8),zn=t(7),Gn=_interopRequireDefault(t(13)),Un=t(4),Hn=t(5),Wn=t(10);function _interopRequireDefault(n){return n&&n.__esModule?n:{"default":n}}function _toConsumableArray(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}t(153);var a=(function _inherits(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{"constructor":{"value":n,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(BasicsPage,Tn.default.Component),o(BasicsPage,[{"key":"_constructor","value":function _constructor(n){(function get(n,e,t){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var a=Object.getPrototypeOf(n);return null===a?void 0:get(a,e,t)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(t):void 0})(BasicsPage.prototype.__proto__||Object.getPrototypeOf(BasicsPage.prototype),"_constructor",this).call(this,n),this.$$refs=new Tn.default.RefsArray}},{"key":"_createData","value":function _createData(n,e,t){this.__state=n||this.state||{},this.__props=e||this.props||{};var o=this.$prefix,a=(0,$n.genCompid)(o+"$compid__64"),u=Mn(a,2),i=u[0],s=u[1],r=(0,$n.genCompid)(o+"$compid__65"),c=Mn(r,2),l=c[0],f=c[1],m=(0,Un.useSelector)(function(n){return n});console.log(m,"dadasd");var d=(0,$n.useContext)(qn.contextItem),p=d.publishArea,y=d.location,h=d.adcode,g=(0,Gn.default)(),v=g.text,_=g.userGetCode,b=(0,$n.useState)(Vn.AREABEIJING.name),S=Mn(b,2),F=S[0],P=S[1],k=(0,$n.useState)(""),x=Mn(k,2),C=x[0],w=x[1],O=["男","女"],N=(0,$n.useState)([]),A=Mn(N,2),I=A[0],j=A[1],B=(0,$n.useState)([]),J=Mn(B,2),M=J[0],$=J[1],T=(0,$n.useState)([]),L=Mn(T,2),D=L[0],R=L[1],E=(0,$n.useState)([]),q=Mn(E,2),V=q[0],z=q[1],G=(0,$n.useState)(!1),U=Mn(G,2),H=U[0],W=U[1],K=(0,$n.useState)(""),Q=Mn(K,2),X=Q[0],Y=Q[1],Z=(0,$n.useState)(0),nn=Mn(Z,2),en=nn[0],tn=nn[1],on=(0,$n.useState)(""),an=Mn(on,2),un=an[0],sn=an[1],rn=(0,$n.useState)(""),cn=Mn(rn,2),ln=cn[0],fn=cn[1],mn=(0,$n.useState)(""),dn=Mn(mn,2),pn=dn[0],yn=dn[1],hn=(0,$n.useState)(""),gn=Mn(hn,2),vn=gn[0],_n=gn[1],bn=(0,$n.useState)(0),Sn=Mn(bn,2),Fn=(Sn[0],Sn[1]),Pn=(0,$n.useState)({"name":"","sex":"","time":"","nation":"","work":[],"workItem":[],"are":"","phone":"","code":"","details":"","classifyTree":[],"maxClassifyCount":3,"classifies":[],"nationCurrentName":""}),kn=Mn(Pn,2),xn=kn[0],Cn=kn[1];function Mb(n,e){var t=void 0;t="sex"===e?O[n.detail.value]:"nationCurrentName"===e?I[n.detail.value]:n.detail.value,"phone"===e&&An(!X||n!==X||""===n);var o=JSON.parse(JSON.stringify(xn));o[e]=t,Cn(o),"details"===e&&tn(t.length)}function Nb(n){Tn.default.showModal({"title":"温馨提示","content":n,"showCancel":!1})}(0,$n.useEffect)(function(){console.log(m,"xxx111");var n=JSON.parse(JSON.stringify(m.Personnel));if(m.Personnel){console.log(m);var e=n.nation.length&&n.nation.map(function(n){return n.mz_name});j(e),$(n.nation),R(n.occupation)}var t=Tn.default.getStorageSync(zn.UserLocationCity);t?P(t.city):(0,En.userAuthLoction)().then(function(n){P(n.city)}).then(function(){P(Vn.AREABEIJING.name)});var o=Tn.default.getStorageSync("introinfo");if(o){if(console.log(o),p&&y&&h)return;var a={"name":o.username,"phone":o.tel,"time":o.birthday,"sex":O[parseInt(o.gender)-1],"nationCurrentName":o.nation,"details":o.introduce,"workItem":o.occupations?o.occupations:[],"are":o.address};Fn(o.nation_id&&0<o.nation_id?o.nation_id-1:0);var u=JSON.parse(JSON.stringify(m.Personnel.occupation));console.log(u,"xxx");var i=void 0,s=void 0;o.occupations_id&&(i=o.occupations_id.split(","),s=u.map(function(n){return n.children.map(function(e){return i.map(function(n){return e.id===n&&(e.is_check=!0),n}),e}),n})),R(s),z(i),yn(o.location?o.location.split(",")[1]:""),_n(o.location?o.location.split(",")[0]:""),sn(o.province?o.province:""),fn(o.city?o.city:""),Y(o.tel?o.tel:""),Cn(a),w(o.ad_code?o.ad_code:""),tn(o.introduce?o.introduce.length:0)}},[]),(0,$n.useDidShow)(function(){console.log(p,y,h),p&&y&&h&&(yn(y?y.split(",")[1]:""),_n(y?y.split(",")[0]:""),w(h),Cn(Jn({},xn,{"are":p})),P(p))});var wn=(0,$n.useState)(!1),On=Mn(wn,2),Nn=On[0],An=On[1],In=function getLocation(){(0,En.recSerAuthLoction)().then(function(n){jn(n)}).catch(function(){Tn.default.setStorageSync(zn.UserListChooseCity,Vn.AREACHINA)})},jn=function resetLocationSearch(n){Cn(Jn({},xn,{"are":n[0].name})),yn(n[0].latitude),_n(n[0].longitude),w(n[0].regeocodeData.addressComponent.adcode)};console.log(D,"xxx"),this.anonymousFunc0=function(n,e,t,o){return function userClickProfession(n,e,t,o){if(console.log(n,e,t,o),console.log(V,"clickOccupation"),D){var a=JSON.parse(JSON.stringify(D)),u=a[n].children[e].is_check;if(console.log(a),!u&&3<=(V?V.length:0))return void(0,Rn.default)("工种最多可以选择3个");a[n].children[e].is_check=!u;var i=JSON.parse(JSON.stringify(V||[])),s=u?i.filter(function(n){return n!==t}):[].concat(_toConsumableArray(i),[t]),r=u?xn.workItem.filter(function(n){return n!==o}):[].concat(_toConsumableArray(xn.workItem),[o]);Cn(Jn({},xn,{"workItem":r})),R(a),console.log(s,"xxxx"),z(s)}}(n,e,t,o)},this.anonymousFunc1=function(n){return Mb(n,"name")},this.anonymousFunc2=function(n){return Mb(n,"sex")},this.anonymousFunc3=function(n){return Mb(n,"time")},this.anonymousFunc4=function(n){return Mb(n,"nationCurrentName")},this.anonymousFunc5=function(){W(!0)};var Bn=xn&&xn.workItem.toString();return this.anonymousFunc6=function(){return function userChooseArea(){F&&Tn.default.navigateTo({"url":"/pages/map/resume/index"})}()},this.anonymousFunc7=function handleLocation(n){n.stopPropagation(),Tn.default.getSetting({"success":function success(n){null!=n.authSetting["scope.userLocation"]&&1!=n.authSetting["scope.userLocation"]?Tn.default.showModal({"title":"是否授权当前位置","content":"需要获取您的地理位置，请确认授权，否则将不能为你自动推荐位置","success":function success(n){n.cancel||n.confirm&&Tn.default.openSetting({"success":function success(n){1==n.authSetting["scope.userLocation"]?(Tn.default.showToast({"title":"授权成功","icon":"success","duration":2e3}),In()):Tn.default.showToast({"title":"授权失败","icon":"success","duration":2e3})}})}}):In()}})},this.anonymousFunc8=function(n){return Mb(n,"phone")},this.anonymousFunc9=function(n){return Mb(n,"code")},this.anonymousFunc10=function(){return function userSendCode(){var n=xn.phone;(0,Hn.isPhone)(n)?_(n):(0,Rn.default)("请先输入正确的手机号")}()},this.anonymousFunc11=function(n){return Mb(n,"details")},this.anonymousFunc12=function handleSubmit(){for(var n=void 0,e=0;e<M.length;e++)M[e].mz_name===xn.nationCurrentName&&(n=M[e].mz_id);if((0,Hn.isVaildVal)(xn.name,2,5))if(xn.sex)if(xn.time)if(n)if(V)if(xn.are)if(xn.phone)if(!Nn||xn.code)if((0,Hn.isVaildVal)(xn.details,15,500)){var t={"code":xn.code,"username":xn.name,"tel":xn.phone,"gender":String(O.indexOf(xn.sex)+1),"nation":String(n),"birthday":xn.time,"occupations":V,"province":un,"city":ln,"introduce":xn.details,"lat":String(pn),"lng":String(vn),"address":xn.are,"adcode":C};(0,Ln.addResumeAction)(t).then(function(n){"200"==n.errcode?(0,Wn.SubscribeToNews)("resume",function(){(0,Dn.SubPopup)({"tips":n.errmsg,"callback":function callback(){Tn.default.navigateBack({"delta":1})}})}):(0,Dn.SubPopup)({"tips":n.errmsg})})}else Nb("请填写真实自我介绍，15-500字，必须含有汉字");else Nb("请正确填写验证码");else Nb("请选择您的工种");else(0,Rn.default)("请选择地区");else Nb("请选择您的工种");else(0,Rn.default)("请选择名族");else(0,Rn.default)("请选择出生日期");else(0,Rn.default)("请选择性别");else Nb("请填写真实姓名，2-5字，必须含有汉字")},H&&$n.propsManager.set({"closeProfession":function closeProfession(){W(!1)},"data":D,"onClickItem":this.anonymousFunc0,"num":3},s,i),$n.propsManager.set({"num":en},f,l),Object.assign(this.__state,{"anonymousState__temp":Bn,"$compid__64":s,"$compid__65":f,"showProfession":H,"formData":xn,"sexList":O,"nationCurrent":I,"isCode":Nn,"text":v}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(){}},{"key":"anonymousFunc6","value":function anonymousFunc6(){}},{"key":"anonymousFunc7","value":function anonymousFunc7(n){n.stopPropagation()}},{"key":"anonymousFunc8","value":function anonymousFunc8(){}},{"key":"anonymousFunc9","value":function anonymousFunc9(){}},{"key":"anonymousFunc10","value":function anonymousFunc10(){}},{"key":"anonymousFunc11","value":function anonymousFunc11(){}},{"key":"anonymousFunc12","value":function anonymousFunc12(){}}]),BasicsPage);function BasicsPage(){!function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BasicsPage);var n=function _possibleConstructorReturn(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}(this,(BasicsPage.__proto__||Object.getPrototypeOf(BasicsPage)).apply(this,arguments));return n.config={"navigationBarTitleText":"基础信息"},n.$usedState=["anonymousState__temp","$compid__64","$compid__65","showProfession","formData","sexList","nationCurrent","isCode","text"],n.customComponents=["Profession","WordsTotal"],n}a.$$events=["anonymousFunc1","anonymousFunc2","anonymousFunc3","anonymousFunc4","anonymousFunc5","anonymousFunc6","anonymousFunc7","anonymousFunc8","anonymousFunc9","anonymousFunc10","anonymousFunc11","anonymousFunc12"],a.$$componentPath="pages/resume/basics/index",a.config={"navigationBarTitleText":"基础信息"},e.default=a,Page(t(0).default.createComponent(a,!0))},"153":function(n,e,t){}},[[152,0,1]]]);