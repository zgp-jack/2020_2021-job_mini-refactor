(wx.webpackJsonp=wx.webpackJsonp||[]).push([[43],{"132":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ce=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(o=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&i.return&&i.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var se=n(0),le=_interopRequireDefault(se),pe=_interopRequireDefault(n(14)),fe=_interopRequireDefault(n(13)),me=n(1),de=n(3),ye=_interopRequireDefault(de),he=n(10),_e=n(6);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}n(133);var r=(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Feedback,le.default.Component),o(Feedback,[{"key":"_constructor","value":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0})(Feedback.prototype.__proto__||Object.getPrototypeOf(Feedback.prototype),"_constructor",this).call(this,e),this.$$refs=new le.default.RefsArray}},{"key":"_createData","value":function _createData(e,t,n){this.__state=e||this.state||{},this.__props=t||this.props||{};var o=this.$prefix,r=(0,se.genCompid)(o+"$compid__51"),a=ce(r,2),u=a[0],i=a[1],c=(0,se.genCompid)(o+"$compid__52"),s=ce(c,2),l=s[0],p=s[1],f=(0,se.genCompid)(o+"$compid__53"),m=ce(f,2),d=m[0],y=m[1],h=(0,se.genCompid)(o+"$compid__54"),_=ce(h,2),v=_[0],g=_[1],b=(0,se.genCompid)(o+"$compid__55"),F=ce(b,2),k=F[0],w=F[1],$=(0,se.useRouter)().params,x=$.username,O=void 0===x?"":x,C=$.phone,S=void 0===C?"":C,P=(0,se.useState)(O),j=ce(P,2),A=j[0],T=j[1],R=(0,se.useState)(S),D=ce(R,2),M=D[0],I=D[1],q=(0,se.useState)(""),E=ce(q,2),B=E[0],V=E[1],J=(0,se.useState)(!1),L=ce(J,2),N=L[0],U=L[1],W=(0,se.useState)(""),G=ce(W,2),z=G[0],H=G[1],K=(0,se.useState)({"item":[]}),Q=ce(K,2),X=Q[0],Y=Q[1],Z=(0,se.useState)(0),ee=ce(Z,2),te=ee[0],ne=ee[1],oe=(0,fe.default)(),re=oe.text,ae=oe.userGetCode,ue=oe.disabled;return this.anonymousFunc0=function(e){return function handleTextarea(e){var t=e.detail.value;V(t),ne(t.length)}(e)},this.anonymousFunc1=function(e){return T(e)},this.anonymousFunc2=function(e){return function handlePhone(e){U(e!==S||!S),I(e)}(e)},this.anonymousFunc3=function(e){return H(e)},this.anonymousFunc4=function(){return ae(M)},this.anonymousFunc5=function handleSubmission(){var e=X.item.map(function(e){return e.url});if(!(0,_e.isVaildVal)(B,15,500))return(0,ye.default)("输入内容不少于15个字且必须包含文字"),!1;if(!A)return(0,ye.default)("请输入联系人姓名"),!1;if(!(0,_e.isPhone)(M))return(0,ye.default)("请输入正确手机号"),!1;if(M!==S&&!z)return(0,ye.default)("请输入验证码"),!1;var t={"images":e,"content":B,"username":A,"tel":M,"code":z};(0,me.feedbackSubmissionAction)(t).then(function(e){"ok"==e.errcode?(0,he.SubscribeToNews)("msg",function(){(0,de.ShowActionModal)({"msg":e.errmsg,"success":function success(){le.default.navigateBack({"delta":1})}})}):(0,ye.default)(e.errmsg)})},se.propsManager.set({"num":te},i,u),X.item&&se.propsManager.set({"images":X.item,"max":9,"userUploadImg":function userUploadImg(e){var n=0<arguments.length&&void 0!==e?e:-1;(0,pe.default)().then(function(e){var t={"url":e.url,"httpurl":e.httpurl};-1===n?Y(ie({},X,{"item":[].concat(function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(X.item),[t])})):(X.item[n]=t,Y(ie({},X)))})}},p,l),se.propsManager.set({"name":"name","title":"联系人","type":"text","placeholder":"请输入你的名字","value":A,"onChange":this.anonymousFunc1},y,d),se.propsManager.set({"name":"phone","title":"联系电话","type":"text","placeholder":"请输入手机号方便客服联系你","maxLength":11,"value":M,"onChange":this.anonymousFunc2},g,v),N&&se.propsManager.set({"clear":!0,"title":"验证码","type":"text","maxLength":4,"placeholder":"请输入你的验证码","name":"code","value":z,"onChange":this.anonymousFunc3},w,k),Object.assign(this.__state,{"$compid__51":i,"$compid__52":p,"$compid__53":y,"$compid__54":g,"$compid__55":w,"textarea":B,"image":X,"isShow":N,"disabled":ue,"text":re}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}},{"key":"anonymousFunc3","value":function anonymousFunc3(){}},{"key":"anonymousFunc4","value":function anonymousFunc4(){}},{"key":"anonymousFunc5","value":function anonymousFunc5(){}}]),Feedback);function Feedback(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Feedback);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Feedback.__proto__||Object.getPrototypeOf(Feedback)).apply(this,arguments));return e.config={"navigationBarTitleText":"鱼泡网-意见反馈"},e.$usedState=["$compid__51","$compid__52","$compid__53","$compid__54","$compid__55","textarea","image","isShow","disabled","text"],e.customComponents=["WechatNotice","WordsTotal","ImageView","AtInput"],e}r.$$events=["anonymousFunc0","anonymousFunc4","anonymousFunc5"],r.$$componentPath="pages/feedback/index",r.config={"navigationBarTitleText":"鱼泡网-意见反馈"},t.default=r,Component(n(0).default.createComponent(r,!0))},"133":function(e,t,n){}},[[132,0,1]]]);